{"version":3,"sources":["node_modules/es6-map/is-implemented.js","node_modules/es5-ext/function/noop.js","node_modules/es5-ext/object/is-value.js","node_modules/es5-ext/object/valid-value.js","node_modules/es5-ext/array/#/clear.js","node_modules/es5-ext/number/is-nan/is-implemented.js","node_modules/es5-ext/number/is-nan/shim.js","node_modules/es5-ext/number/is-nan/index.js","node_modules/es5-ext/math/sign/is-implemented.js","node_modules/es5-ext/math/sign/shim.js","node_modules/es5-ext/math/sign/index.js","node_modules/es5-ext/number/to-integer.js","node_modules/es5-ext/number/to-pos-integer.js","node_modules/es5-ext/array/#/e-index-of.js","node_modules/es5-ext/object/set-prototype-of/is-implemented.js","node_modules/es5-ext/object/is-object.js","node_modules/es5-ext/object/create.js","node_modules/es5-ext/object/set-prototype-of/shim.js","node_modules/es5-ext/object/set-prototype-of/index.js","node_modules/es5-ext/object/valid-callable.js","node_modules/type/value/is.js","node_modules/type/object/is.js","node_modules/type/prototype/is.js","node_modules/type/function/is.js","node_modules/type/plain-function/is.js","node_modules/es5-ext/object/assign/is-implemented.js","node_modules/es5-ext/object/keys/is-implemented.js","node_modules/es5-ext/object/keys/shim.js","node_modules/es5-ext/object/keys/index.js","node_modules/es5-ext/object/assign/shim.js","node_modules/es5-ext/object/assign/index.js","node_modules/es5-ext/object/normalize-options.js","node_modules/es5-ext/string/#/contains/is-implemented.js","node_modules/es5-ext/string/#/contains/shim.js","node_modules/es5-ext/string/#/contains/index.js","node_modules/d/index.js","node_modules/event-emitter/index.js","node_modules/es5-ext/global.js","node_modules/es6-symbol/is-implemented.js","node_modules/es6-symbol/is-symbol.js","node_modules/es6-symbol/validate-symbol.js","node_modules/es6-symbol/lib/private/generate-name.js","node_modules/es6-symbol/lib/private/setup/standard-symbols.js","node_modules/es6-symbol/lib/private/setup/symbol-registry.js","node_modules/es6-symbol/polyfill.js","node_modules/es6-symbol/index.js","node_modules/es5-ext/function/is-arguments.js","node_modules/es5-ext/string/is-string.js","node_modules/es6-iterator/is-iterable.js","node_modules/es6-iterator/valid-iterable.js","node_modules/type/string/coerce.js","node_modules/type/lib/safe-to-string.js","node_modules/type/lib/to-short-string.js","node_modules/type/lib/resolve-exception.js","node_modules/type/value/ensure.js","node_modules/type/plain-function/ensure.js","node_modules/es5-ext/array/from/is-implemented.js","node_modules/es5-ext/function/is-function.js","node_modules/es5-ext/array/from/shim.js","node_modules/es5-ext/array/from/index.js","node_modules/es5-ext/object/copy.js","node_modules/es5-ext/object/_iterate.js","node_modules/es5-ext/object/for-each.js","node_modules/es5-ext/object/map.js","node_modules/d/auto-bind.js","node_modules/es6-iterator/index.js","node_modules/es6-iterator/array.js","node_modules/es6-iterator/string.js","node_modules/es6-iterator/get.js","node_modules/es6-iterator/for-of.js","node_modules/es5-ext/object/primitive-set.js","node_modules/es6-map/lib/iterator-kinds.js","node_modules/es6-map/lib/iterator.js","node_modules/es6-map/is-native-implemented.js","node_modules/es6-map/polyfill.js","node_modules/es6-map/index.js","js/utils/observer.js","node_modules/intersection-observer/intersection-observer.js","node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","node_modules/picturefill/dist/picturefill.js","js/image.js","node_modules/lodash/_arrayPush.js","node_modules/lodash/_freeGlobal.js","node_modules/lodash/_root.js","node_modules/lodash/_Symbol.js","node_modules/lodash/_getRawTag.js","node_modules/lodash/_objectToString.js","node_modules/lodash/_baseGetTag.js","node_modules/lodash/isObjectLike.js","node_modules/lodash/_baseIsArguments.js","node_modules/lodash/isArguments.js","node_modules/lodash/isArray.js","node_modules/lodash/_isFlattenable.js","node_modules/lodash/_baseFlatten.js","node_modules/lodash/flatten.js","node_modules/intersection-observer-polyfill/src/shims/es6-collections.js","node_modules/intersection-observer-polyfill/src/shims/performance.now.js","node_modules/intersection-observer-polyfill/src/IntersectionObserverController.js","node_modules/intersection-observer-polyfill/src/geometry.js","node_modules/intersection-observer-polyfill/src/IntersectionObserverEntry.js","node_modules/intersection-observer-polyfill/src/IntersectionObservation.js","node_modules/intersection-observer-polyfill/src/_IntersectionObserver.js","node_modules/intersection-observer-polyfill/src/IntersectionObserver.js","node_modules/intersection-observer-polyfill/index.js","js/borders.js","js/main.js"],"names":["Observer","options","observer","entries","forEach","handle","callbacks","Map","entry","cbs","get","target","cb","observe","el","has","set","unobserve","filter","x","length","delete","MapShim","getIndex","arr","key","result","some","index","class_1","__entries__","Object","defineProperty","prototype","enumerable","configurable","value","push","splice","clear","callback","ctx","_i","_a","call","isBrowser","window","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","bind","setTimeout","Date","now","trailingTimeout","throttle","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","REFRESH_DELAY","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","addObserver","indexOf","connect_","removeObserver","observers","disconnect_","changesDetected","updateObservers_","activeObservers","gatherActive","hasActive","broadcastActive","addEventListener","attributes","childList","characterData","subtree","removeEventListener","disconnect","_b","propertyName","isReflowProperty","getInstance","instance_","defineConfigurable","props","keys","writable","getWindowOf","ownerGlobal","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","arguments","reduce","size","position","getPaddings","paddings","positions_1","getSVGContentRect","bbox","getBBox","width","height","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","horizPad","left","right","vertPad","top","bottom","boxSizing","round","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","documentElement","getContentRect","createReadOnlyRect","y","Constr","DOMRectReadOnly","rect","create","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","broadcastRect","ResizeObserverEntry","rectInit","contentRect","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","clearActive","_this","observation","map","WeakMap","ResizeObserver","method","apply","ua","navigator","userAgent","HTMLPictureElement","test","match","RegExp","$1","timer","dummySrc","createElement","fixRespimg","img","source","sizes","picture","parentNode","nodeName","toUpperCase","cloneNode","insertBefore","firstElementChild","removeChild","_pfLastSize","offsetWidth","findPictureImgs","i","imgs","querySelectorAll","onResize","clearTimeout","mq","matchMedia","init","addListener","srcset","readyState","undefined","warn","eminpx","alwaysCheckWDescriptor","evalId","pf","isSupportTestReady","noop","image","getImgAttr","getAttribute","setImgAttr","setAttribute","removeImgAttr","removeAttribute","docElem","types","cfg","algorithm","srcAttr","srcsetAttr","supportAbort","curSrcProp","regWDesc","regSize","setOptions","picturefillCFG","baseStyle","fsCss","isVwDirty","cssCache","sizeLengthCache","DPR","devicePixelRatio","units","px","anchor","alreadyRun","regexLeadingSpaces","regexLeadingCommasOrSpaces","regexLeadingNotSpaces","regexTrailingCommas","regexNonNegativeInteger","regexFloatingPoint","on","obj","evt","fn","capture","attachEvent","memoize","cache","input","isSpace","c","evalCSS","regLength","replace","args","string","buildStr","css","toLowerCase","parsedLength","e","setResolution","candidate","sizesattr","w","cWidth","calcListLength","res","d","picturefill","opt","elements","plen","nodeType","context","qsa","reevaluate","reselect","sel","selShort","setupRun","fillImg","teardownRun","console","message","detectTypeSupport","type","typeUri","Image","onerror","onload","src","implementation","hasFeature","updateMetrics","max","innerWidth","innerHeight","vw","vh","join","em","getEmValue","rem","chooseLowRes","lowerValue","higherValue","dprValue","isCached","bonusFactor","tooMuch","bonus","meanDensity","pow","sqrt","applyBestCandidate","srcSetCandidates","matchingSet","getSet","evaluated","setRes","applySetCandidate","ns","evaled","ascendingSort","a","b","setSrcToCur","sets","getCandidateForSrc","makeUrl","curSrc","curCan","candidates","parseSet","url","getAllSourceElements","len","sources","getElementsByTagName","media","parseSrcset","collectCharacters","regEx","chars","exec","substring","pos","inputLength","descriptors","currentDescriptor","state","parseDescriptors","pError","h","desc","lastChar","intVal","floatVal","parseInt","has1x","tokenize","charAt","slice","parseSizes","strValue","regexCssLengthWithUnits","regexCssCalc","unparsedSizesList","unparsedSizesListLength","unparsedSize","lastComponentValue","parseComponentValues","str","chrctr","component","componentArray","listArray","parenDepth","inComment","pushComponent","pushComponentArray","isValidNonNegativeSourceSizeValue","s","pop","matchesMedia","getTime","substr","supSrcset","supSizes","supPicture","image2","complete","width2","width1","u","setSize","href","matches","mMQ","calcLength","sourceSizeValue","supportsType","parseSize","sourceSizeStr","cands","body","div","originalHTMLCSS","style","cssText","originalBodyCSS","appendChild","sourceSizeListStr","uT","winningLength","j","bestCandidate","candidateSrc","abortCurSrc","imageData","dpr","cached","sort","setSrc","origWidth","parseSets","element","parent","srcsetAttribute","imageSet","isWDescripor","srcsetParsed","hasPicture","pic","supported","parsed","extreme","isDomReady","regReady","run","timerId","fillImgs","debounce","func","wait","timeout","timestamp","later","last","lastClientWidth","_","name","shift","module","exports","define","amd","resizeObserver","intersectionObserver","IntersectionObserver","rootMargin","update","onIntersect","isIntersecting","getBoundingClientRect","dataset","hasNativeCollections","constructor","values","performance","mutationsSupported","requestAnimFrame","timeoutID","IntersectionObserverController","idleTimeout","trackHovers","_idleTimeout","_trackHovers","_cycleStartTime","_isUpdateScheduled","_repeatCycle","_hoverInitiated","_mutationsObserver","_isListening","_observers","startUpdateCycle","scheduleUpdate","_onMutation","_repeatHandler","_onMouseOver","connect","isConnected","_initListeners","_removeListeners","_updateObservers","hasChanges","updateObservations","hasEntries","notifySubscriber","calledFromRAF","_wasCycleStarted","_hasIdleTimeEnded","_onCycleEnded","_addHoverListener","_removeHoverListener","enableHover","disableHover","isHoverEnabled","runSingleUpdate","every","mapToClientRect","defineProperties","createRectangle","getRectangle","getArea","isEmpty","isEqual","first","second","IntersectionObserverEntry","targetRect","intersecRect","intersecRatio","rootBounds","time","boundingClientRect","intersectionRatio","intersectionRect","isDetached","container","docElement","contains","computeIntersection","rootRect","min","getIntersection","containterRect","rootReached","parentRect","overflow","IntersectionObservation","prevTargetRect","prevThreshold","prevRatio","updateIntersection","root","intersection","getIntersectionData","threshold","exists","ratioChanged","ratio","targetRectChanged","thresholdChanged","getThresholdGreaterThan","queueEntry","detached","intersects","parseThresholds","thresholds","Array","isArray","Number","isFinite","RangeError","parseMargins","margins","split","Error","rawData","parsedData","token","unit","pixels","applyMargins","margin","publicObserver","freeze","_root","_callback","_rootMargin","_targets","_quedEntries","_publicObserver","targets","takeRecords","getRootRect","changes","thresholdsLen","_IntersectionObserver","IntersectionObserverPolyfill","createSegments","delays","fill","random","modifier","segment","className","transitionDelay","floor","els","classList","add","setProperty"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxGA;AACA;AACA;AACA;;;;;;;;;ACHA;;;;;;;;;;;;eAEe,kBAAEA,QAAF,EAAYC,OAAZ,EAAyB;AACpC,MAAIC,QAAQ,GAAG,IAAIF,QAAJ,CAAc,UAAAG,OAAO;AAAA,WAAIA,OAAO,CAACC,OAAR,CAAiBC,MAAjB,CAAJ;AAAA,GAArB,EAAoDJ,OAApD,CAAf;AACA,MAAIK,SAAS,GAAG,IAAIC,eAAJ,EAAhB;;AACA,MAAIF,MAAM,GAAG,SAATA,MAAS,CAAAG,KAAK,EAAI;AAClB,QAAIC,GAAG,GAAGH,SAAS,CAACI,GAAV,CAAeF,KAAK,CAACG,MAArB,CAAV;AACA,QAAKF,GAAL,EAAWA,GAAG,CAACL,OAAJ,CAAa,UAAAQ,EAAE;AAAA,aAAIA,EAAE,CAAEJ,KAAF,CAAN;AAAA,KAAf;AACd,GAHD;;AAIA,MAAIK,OAAO,GAAG,SAAVA,OAAU,CAAEC,EAAF,EAAMF,EAAN,EAAc;AACxB,QAAKN,SAAS,CAACS,GAAV,CAAeD,EAAf,CAAL,EAA2B;AACvBR,MAAAA,SAAS,CAACU,GAAV,CAAeF,EAAf,+BAAwBR,SAAS,CAACI,GAAV,CAAeI,EAAf,CAAxB,IAA6CF,EAA7C;AACH,KAFD,MAEO;AACHN,MAAAA,SAAS,CAACU,GAAV,CAAeF,EAAf,EAAmB,CAAEF,EAAF,CAAnB;AACAV,MAAAA,QAAQ,CAACW,OAAT,CAAkBC,EAAlB;AACH;AACJ,GAPD;;AAQA,MAAIG,SAAS,GAAG,SAAZA,SAAY,CAAEH,EAAF,EAAMF,EAAN,EAAc;AAC1B,QAAIH,GAAG,GAAGH,SAAS,CAACI,GAAV,CAAeI,EAAf,CAAV;;AACA,QAAKL,GAAL,EAAW;AACPA,MAAAA,GAAG,GAAGA,GAAG,CAACS,MAAJ,CAAY,UAAAC,CAAC;AAAA,eAAIA,CAAC,KAAKP,EAAV;AAAA,OAAb,CAAN;;AACA,UAAKH,GAAG,CAACW,MAAT,EAAkB;AACdd,QAAAA,SAAS,CAACU,GAAV,CAAeF,EAAf,EAAmBL,GAAnB;AACH,OAFD,MAEO;AACHH,QAAAA,SAAS,CAACe,MAAV,CAAkBP,EAAlB;AACAZ,QAAAA,QAAQ,CAACe,SAAT,CAAoBH,EAApB;AACH;AACJ;AACJ,GAXD;;AAYA,SAAO;AAAED,IAAAA,OAAO,EAAPA,OAAF;AAAWI,IAAAA,SAAS,EAATA;AAAX,GAAP;AACH;;;;AC9BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACruBA;;;;;;;AAMA;AACA,IAAIK,OAAO,GAAI,YAAY;AACvB,MAAI,OAAOf,GAAP,KAAe,WAAnB,EAAgC;AAC5B,WAAOA,GAAP;AACH;AACD;;;;;;;;;AAOA,WAASgB,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AACxB,QAAIC,MAAM,GAAG,CAAC,CAAd;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,UAAUnB,KAAV,EAAiBoB,KAAjB,EAAwB;AAC7B,UAAIpB,KAAK,CAAC,CAAD,CAAL,KAAaiB,GAAjB,EAAsB;AAClBC,QAAAA,MAAM,GAAGE,KAAT;AACA,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KAND;AAOA,WAAOF,MAAP;AACH;;AACD;AAAO;AAAe,gBAAY;AAC9B,eAASG,OAAT,GAAmB;AACf,aAAKC,WAAL,GAAmB,EAAnB;AACH;;AACDC,MAAAA,M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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpBA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtBA;;;;;AAMA,MAAMI,oBAAoB,GACtB,OAAOhc,MAAM,CAACwI,OAAd,KAA0B,UAA1B,IACA,OAAOxI,MAAM,CAACvC,GAAd,KAAsB,UAF1B;;AAIA,MAAM+K,OAAO,GAAI,YAAY;AACzB,MAAIwT,oBAAJ,EAA0B;AACtB,WAAOhc,MAAM,CAACwI,OAAd;AACH;AAED;;;;;;;;AAMA,WAAS/J,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AACxB,QAAIC,MAAM,GAAG,CAAC,CAAd;AAEAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,CAACnB,KAAD,EAAQoB,KAAR,KAAkB;AACvB,UAAI6Y,OAAO,GAAGja,KAAK,CAAC,CAAD,CAAL,KAAaiB,GAA3B;;AAEA,UAAIgZ,OAAJ,EAAa;AACT/Y,QAAAA,MAAM,GAAGE,KAAT;AACH;;AAED,aAAO6Y,OAAP;AACH,KARD;AAUA,WAAO/Y,MAAP;AACH;;AAED,SAAO,MAAM;AACTqd,IAAAA,WAAW,GAAG;AACV,WAAKjd,WAAL,GAAmB,EAAnB;AACH;AAED;;;;;;;AAKApB,IAAAA,GAAG,CAACe,GAAD,EAAM;AACL,UAAIG,KAAK,GAAGL,QAAQ,CAAC,KAAKO,WAAN,EAAmBL,GAAnB,CAApB;A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","file":"main.js","sourceRoot":"../..","sourcesContent":["'use strict';\n\nmodule.exports = function () {\n\tvar map, iterator, result;\n\tif (typeof Map !== 'function') return false;\n\ttry {\n\t\t// WebKit doesn't support arguments and crashes\n\t\tmap = new Map([['raz', 'one'], ['dwa', 'two'], ['trzy', 'three']]);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\tif (String(map) !== '[object Map]') return false;\n\tif (map.size !== 3) return false;\n\tif (typeof map.clear !== 'function') return false;\n\tif (typeof map.delete !== 'function') return false;\n\tif (typeof map.entries !== 'function') return false;\n\tif (typeof map.forEach !== 'function') return false;\n\tif (typeof map.get !== 'function') return false;\n\tif (typeof map.has !== 'function') return false;\n\tif (typeof map.keys !== 'function') return false;\n\tif (typeof map.set !== 'function') return false;\n\tif (typeof map.values !== 'function') return false;\n\n\titerator = map.entries();\n\tresult = iterator.next();\n\tif (result.done !== false) return false;\n\tif (!result.value) return false;\n\tif (result.value[0] !== 'raz') return false;\n\tif (result.value[1] !== 'one') return false;\n\n\treturn true;\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","// Inspired by Google Closure:\n// http://closure-library.googlecode.com/svn/docs/\n// closure_goog_array_array.js.html#goog.array.clear\n\n\"use strict\";\n\nvar value = require(\"../../object/valid-value\");\n\nmodule.exports = function () {\n\tvalue(this).length = 0;\n\treturn this;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar numberIsNaN = Number.isNaN;\n\tif (typeof numberIsNaN !== \"function\") return false;\n\treturn !numberIsNaN({}) && numberIsNaN(NaN) && !numberIsNaN(34);\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\t// eslint-disable-next-line no-self-compare\n\treturn value !== value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Number.isNaN : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar sign = Math.sign;\n\tif (typeof sign !== \"function\") return false;\n\treturn sign(10) === 1 && sign(-20) === -1;\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\tvalue = Number(value);\n\tif (isNaN(value) || value === 0) return value;\n\treturn value > 0 ? 1 : -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Math.sign : require(\"./shim\");\n","\"use strict\";\n\nvar sign  = require(\"../math/sign\")\n  , abs   = Math.abs\n  , floor = Math.floor;\n\nmodule.exports = function (value) {\n\tif (isNaN(value)) return 0;\n\tvalue = Number(value);\n\tif (value === 0 || !isFinite(value)) return value;\n\treturn sign(value) * floor(abs(value));\n};\n","\"use strict\";\n\nvar toInteger = require(\"./to-integer\")\n  , max       = Math.max;\n\nmodule.exports = function (value) { return max(0, toInteger(value)); };\n","\"use strict\";\n\nvar numberIsNaN       = require(\"../../number/is-nan\")\n  , toPosInt          = require(\"../../number/to-pos-integer\")\n  , value             = require(\"../../object/valid-value\")\n  , indexOf           = Array.prototype.indexOf\n  , objHasOwnProperty = Object.prototype.hasOwnProperty\n  , abs               = Math.abs\n  , floor             = Math.floor;\n\nmodule.exports = function (searchElement/*, fromIndex*/) {\n\tvar i, length, fromIndex, val;\n\tif (!numberIsNaN(searchElement)) return indexOf.apply(this, arguments);\n\n\tlength = toPosInt(value(this).length);\n\tfromIndex = arguments[1];\n\tif (isNaN(fromIndex)) fromIndex = 0;\n\telse if (fromIndex >= 0) fromIndex = floor(fromIndex);\n\telse fromIndex = toPosInt(this.length) - floor(abs(fromIndex));\n\n\tfor (i = fromIndex; i < length; ++i) {\n\t\tif (objHasOwnProperty.call(this, i)) {\n\t\t\tval = this[i];\n\t\t\tif (numberIsNaN(val)) return i; // Jslint: ignore\n\t\t}\n\t}\n\treturn -1;\n};\n","\"use strict\";\n\nvar create = Object.create, getPrototypeOf = Object.getPrototypeOf, plainObject = {};\n\nmodule.exports = function (/* CustomCreate*/) {\n\tvar setPrototypeOf = Object.setPrototypeOf, customCreate = arguments[0] || create;\n\tif (typeof setPrototypeOf !== \"function\") return false;\n\treturn getPrototypeOf(setPrototypeOf(customCreate(null), plainObject)) === plainObject;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar map = { function: true, object: true };\n\nmodule.exports = function (value) { return (isValue(value) && map[typeof value]) || false; };\n","// Workaround for http://code.google.com/p/v8/issues/detail?id=2804\n\n\"use strict\";\n\nvar create = Object.create, shim;\n\nif (!require(\"./set-prototype-of/is-implemented\")()) {\n\tshim = require(\"./set-prototype-of/shim\");\n}\n\nmodule.exports = (function () {\n\tvar nullObject, polyProps, desc;\n\tif (!shim) return create;\n\tif (shim.level !== 1) return create;\n\n\tnullObject = {};\n\tpolyProps = {};\n\tdesc = { configurable: false, enumerable: false, writable: true, value: undefined };\n\tObject.getOwnPropertyNames(Object.prototype).forEach(function (name) {\n\t\tif (name === \"__proto__\") {\n\t\t\tpolyProps[name] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: undefined\n\t\t\t};\n\t\t\treturn;\n\t\t}\n\t\tpolyProps[name] = desc;\n\t});\n\tObject.defineProperties(nullObject, polyProps);\n\n\tObject.defineProperty(shim, \"nullPolyfill\", {\n\t\tconfigurable: false,\n\t\tenumerable: false,\n\t\twritable: false,\n\t\tvalue: nullObject\n\t});\n\n\treturn function (prototype, props) {\n\t\treturn create(prototype === null ? nullObject : prototype, props);\n\t};\n})();\n","/* eslint no-proto: \"off\" */\n\n// Big thanks to @WebReflection for sorting this out\n// https://gist.github.com/WebReflection/5593554\n\n\"use strict\";\n\nvar isObject         = require(\"../is-object\")\n  , value            = require(\"../valid-value\")\n  , objIsPrototypeOf = Object.prototype.isPrototypeOf\n  , defineProperty   = Object.defineProperty\n  , nullDesc         = { configurable: true, enumerable: false, writable: true, value: undefined }\n  , validate;\n\nvalidate = function (obj, prototype) {\n\tvalue(obj);\n\tif (prototype === null || isObject(prototype)) return obj;\n\tthrow new TypeError(\"Prototype must be null or an object\");\n};\n\nmodule.exports = (function (status) {\n\tvar fn, set;\n\tif (!status) return null;\n\tif (status.level === 2) {\n\t\tif (status.set) {\n\t\t\tset = status.set;\n\t\t\tfn = function (obj, prototype) {\n\t\t\t\tset.call(validate(obj, prototype), prototype);\n\t\t\t\treturn obj;\n\t\t\t};\n\t\t} else {\n\t\t\tfn = function (obj, prototype) {\n\t\t\t\tvalidate(obj, prototype).__proto__ = prototype;\n\t\t\t\treturn obj;\n\t\t\t};\n\t\t}\n\t} else {\n\t\tfn = function self(obj, prototype) {\n\t\t\tvar isNullBase;\n\t\t\tvalidate(obj, prototype);\n\t\t\tisNullBase = objIsPrototypeOf.call(self.nullPolyfill, obj);\n\t\t\tif (isNullBase) delete self.nullPolyfill.__proto__;\n\t\t\tif (prototype === null) prototype = self.nullPolyfill;\n\t\t\tobj.__proto__ = prototype;\n\t\t\tif (isNullBase) defineProperty(self.nullPolyfill, \"__proto__\", nullDesc);\n\t\t\treturn obj;\n\t\t};\n\t}\n\treturn Object.defineProperty(fn, \"level\", {\n\t\tconfigurable: false,\n\t\tenumerable: false,\n\t\twritable: false,\n\t\tvalue: status.level\n\t});\n})(\n\t(function () {\n\t\tvar tmpObj1 = Object.create(null)\n\t\t  , tmpObj2 = {}\n\t\t  , set\n\t\t  , desc = Object.getOwnPropertyDescriptor(Object.prototype, \"__proto__\");\n\n\t\tif (desc) {\n\t\t\ttry {\n\t\t\t\tset = desc.set; // Opera crashes at this point\n\t\t\t\tset.call(tmpObj1, tmpObj2);\n\t\t\t} catch (ignore) {}\n\t\t\tif (Object.getPrototypeOf(tmpObj1) === tmpObj2) return { set: set, level: 2 };\n\t\t}\n\n\t\ttmpObj1.__proto__ = tmpObj2;\n\t\tif (Object.getPrototypeOf(tmpObj1) === tmpObj2) return { level: 2 };\n\n\t\ttmpObj1 = {};\n\t\ttmpObj1.__proto__ = tmpObj2;\n\t\tif (Object.getPrototypeOf(tmpObj1) === tmpObj2) return { level: 1 };\n\n\t\treturn false;\n\t})()\n);\n\nrequire(\"../create\");\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.setPrototypeOf : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","module.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module), be nice\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\tget: function () { return this; },\n\t\tconfigurable: true\n\t});\n\ttry { return __global__; }\n\tfinally { delete Object.prototype.__global__; }\n})();\n","\"use strict\";\n\nvar global     = require(\"es5-ext/global\")\n  , validTypes = { object: true, symbol: true };\n\nmodule.exports = function () {\n\tvar Symbol = global.Symbol;\n\tvar symbol;\n\tif (typeof Symbol !== \"function\") return false;\n\tsymbol = Symbol(\"test symbol\");\n\ttry { String(symbol); }\n\tcatch (e) { return false; }\n\n\t// Return 'true' also for polyfills\n\tif (!validTypes[typeof Symbol.iterator]) return false;\n\tif (!validTypes[typeof Symbol.toPrimitive]) return false;\n\tif (!validTypes[typeof Symbol.toStringTag]) return false;\n\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\tif (!value) return false;\n\tif (typeof value === \"symbol\") return true;\n\tif (!value.constructor) return false;\n\tif (value.constructor.name !== \"Symbol\") return false;\n\treturn value[value.constructor.toStringTag] === \"Symbol\";\n};\n","\"use strict\";\n\nvar isSymbol = require(\"./is-symbol\");\n\nmodule.exports = function (value) {\n\tif (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n\treturn value;\n};\n","\"use strict\";\n\nvar d = require(\"d\");\n\nvar create = Object.create, defineProperty = Object.defineProperty, objPrototype = Object.prototype;\n\nvar created = create(null);\nmodule.exports = function (desc) {\n\tvar postfix = 0, name, ie11BugWorkaround;\n\twhile (created[desc + (postfix || \"\")]) ++postfix;\n\tdesc += postfix || \"\";\n\tcreated[desc] = true;\n\tname = \"@@\" + desc;\n\tdefineProperty(\n\t\tobjPrototype,\n\t\tname,\n\t\td.gs(null, function (value) {\n\t\t\t// For IE11 issue see:\n\t\t\t// https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n\t\t\t//    ie11-broken-getters-on-dom-objects\n\t\t\t// https://github.com/medikoo/es6-symbol/issues/12\n\t\t\tif (ie11BugWorkaround) return;\n\t\t\tie11BugWorkaround = true;\n\t\t\tdefineProperty(this, name, d(value));\n\t\t\tie11BugWorkaround = false;\n\t\t})\n\t);\n\treturn name;\n};\n","\"use strict\";\n\nvar d            = require(\"d\")\n  , NativeSymbol = require(\"es5-ext/global\").Symbol;\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\t// To ensure proper interoperability with other native functions (e.g. Array.from)\n\t\t// fallback to eventual native implementation of given symbol\n\t\thasInstance: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill(\"hasInstance\")\n\t\t),\n\t\tisConcatSpreadable: d(\n\t\t\t\"\",\n\t\t\t(NativeSymbol && NativeSymbol.isConcatSpreadable) ||\n\t\t\t\tSymbolPolyfill(\"isConcatSpreadable\")\n\t\t),\n\t\titerator: d(\"\", (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill(\"iterator\")),\n\t\tmatch: d(\"\", (NativeSymbol && NativeSymbol.match) || SymbolPolyfill(\"match\")),\n\t\treplace: d(\"\", (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill(\"replace\")),\n\t\tsearch: d(\"\", (NativeSymbol && NativeSymbol.search) || SymbolPolyfill(\"search\")),\n\t\tspecies: d(\"\", (NativeSymbol && NativeSymbol.species) || SymbolPolyfill(\"species\")),\n\t\tsplit: d(\"\", (NativeSymbol && NativeSymbol.split) || SymbolPolyfill(\"split\")),\n\t\ttoPrimitive: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill(\"toPrimitive\")\n\t\t),\n\t\ttoStringTag: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill(\"toStringTag\")\n\t\t),\n\t\tunscopables: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill(\"unscopables\")\n\t\t)\n\t});\n};\n","\"use strict\";\n\nvar d              = require(\"d\")\n  , validateSymbol = require(\"../../../validate-symbol\");\n\nvar registry = Object.create(null);\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\tfor: d(function (key) {\n\t\t\tif (registry[key]) return registry[key];\n\t\t\treturn (registry[key] = SymbolPolyfill(String(key)));\n\t\t}),\n\t\tkeyFor: d(function (symbol) {\n\t\t\tvar key;\n\t\t\tvalidateSymbol(symbol);\n\t\t\tfor (key in registry) {\n\t\t\t\tif (registry[key] === symbol) return key;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t})\n\t});\n};\n","// ES2015 Symbol polyfill for environments that do not (or partially) support it\n\n\"use strict\";\n\nvar d                    = require(\"d\")\n  , validateSymbol       = require(\"./validate-symbol\")\n  , NativeSymbol         = require(\"es5-ext/global\").Symbol\n  , generateName         = require(\"./lib/private/generate-name\")\n  , setupStandardSymbols = require(\"./lib/private/setup/standard-symbols\")\n  , setupSymbolRegistry  = require(\"./lib/private/setup/symbol-registry\");\n\nvar create = Object.create\n  , defineProperties = Object.defineProperties\n  , defineProperty = Object.defineProperty;\n\nvar SymbolPolyfill, HiddenSymbol, isNativeSafe;\n\nif (typeof NativeSymbol === \"function\") {\n\ttry {\n\t\tString(NativeSymbol());\n\t\tisNativeSafe = true;\n\t} catch (ignore) {}\n} else {\n\tNativeSymbol = null;\n}\n\n// Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\nHiddenSymbol = function Symbol(description) {\n\tif (this instanceof HiddenSymbol) throw new TypeError(\"Symbol is not a constructor\");\n\treturn SymbolPolyfill(description);\n};\n\n// Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n\tvar symbol;\n\tif (this instanceof Symbol) throw new TypeError(\"Symbol is not a constructor\");\n\tif (isNativeSafe) return NativeSymbol(description);\n\tsymbol = create(HiddenSymbol.prototype);\n\tdescription = description === undefined ? \"\" : String(description);\n\treturn defineProperties(symbol, {\n\t\t__description__: d(\"\", description),\n\t\t__name__: d(\"\", generateName(description))\n\t});\n};\n\nsetupStandardSymbols(SymbolPolyfill);\nsetupSymbolRegistry(SymbolPolyfill);\n\n// Internal tweaks for real symbol producer\ndefineProperties(HiddenSymbol.prototype, {\n\tconstructor: d(SymbolPolyfill),\n\ttoString: d(\"\", function () { return this.__name__; })\n});\n\n// Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\ndefineProperties(SymbolPolyfill.prototype, {\n\ttoString: d(function () { return \"Symbol (\" + validateSymbol(this).__description__ + \")\"; }),\n\tvalueOf: d(function () { return validateSymbol(this); })\n});\ndefineProperty(\n\tSymbolPolyfill.prototype,\n\tSymbolPolyfill.toPrimitive,\n\td(\"\", function () {\n\t\tvar symbol = validateSymbol(this);\n\t\tif (typeof symbol === \"symbol\") return symbol;\n\t\treturn symbol.toString();\n\t})\n);\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d(\"c\", \"Symbol\"));\n\n// Proper implementaton of toPrimitive and toStringTag for returned symbol instances\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toStringTag,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])\n);\n\n// Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toPrimitive,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive])\n);\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? require(\"es5-ext/global\").Symbol\n\t: require(\"./polyfill\");\n","\"use strict\";\n\nvar objToString = Object.prototype.toString\n  , id = objToString.call((function () { return arguments; })());\n\nmodule.exports = function (value) { return objToString.call(value) === id; };\n","\"use strict\";\n\nvar objToString = Object.prototype.toString, id = objToString.call(\"\");\n\nmodule.exports = function (value) {\n\treturn (\n\t\ttypeof value === \"string\" ||\n\t\t(value &&\n\t\t\ttypeof value === \"object\" &&\n\t\t\t(value instanceof String || objToString.call(value) === id)) ||\n\t\tfalse\n\t);\n};\n","\"use strict\";\n\nvar isArguments = require(\"es5-ext/function/is-arguments\")\n  , isValue     = require(\"es5-ext/object/is-value\")\n  , isString    = require(\"es5-ext/string/is-string\");\n\nvar iteratorSymbol = require(\"es6-symbol\").iterator\n  , isArray        = Array.isArray;\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\tif (isArray(value)) return true;\n\tif (isString(value)) return true;\n\tif (isArguments(value)) return true;\n\treturn typeof value[iteratorSymbol] === \"function\";\n};\n","\"use strict\";\n\nvar isIterable = require(\"./is-iterable\");\n\nmodule.exports = function (value) {\n\tif (!isIterable(value)) throw new TypeError(value + \" is not iterable\");\n\treturn value;\n};\n","\"use strict\";\n\nvar isValue  = require(\"../value/is\")\n  , isObject = require(\"../object/is\");\n\nvar objectToString = Object.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return null;\n\tif (isObject(value)) {\n\t\t// Reject Object.prototype.toString coercion\n\t\tvar valueToString = value.toString;\n\t\tif (typeof valueToString !== \"function\") return null;\n\t\tif (valueToString === objectToString) return null;\n\t\t// Note: It can be object coming from other realm, still as there's no ES3 and CSP compliant\n\t\t// way to resolve its realm's Object.prototype.toString it's left as not addressed edge case\n\t}\n\ttry {\n\t\treturn \"\" + value; // Ensure implicit coercion\n\t} catch (error) {\n\t\treturn null;\n\t}\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\ttry {\n\t\treturn value.toString();\n\t} catch (error) {\n\t\ttry { return String(value); }\n\t\tcatch (error2) { return null; }\n\t}\n};\n","\"use strict\";\n\nvar safeToString = require(\"./safe-to-string\");\n\nvar reNewLine = /[\\n\\r\\u2028\\u2029]/g;\n\nmodule.exports = function (value) {\n\tvar string = safeToString(value);\n\tif (string === null) return \"<Non-coercible to string value>\";\n\t// Trim if too long\n\tif (string.length > 100) string = string.slice(0, 99) + \"…\";\n\t// Replace eventual new lines\n\tstring = string.replace(reNewLine, function (char) {\n\t\tswitch (char) {\n\t\t\tcase \"\\n\":\n\t\t\t\treturn \"\\\\n\";\n\t\t\tcase \"\\r\":\n\t\t\t\treturn \"\\\\r\";\n\t\t\tcase \"\\u2028\":\n\t\t\t\treturn \"\\\\u2028\";\n\t\t\tcase \"\\u2029\":\n\t\t\t\treturn \"\\\\u2029\";\n\t\t\t/* istanbul ignore next */\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unexpected character\");\n\t\t}\n\t});\n\treturn string;\n};\n","\"use strict\";\n\nvar isValue       = require(\"../value/is\")\n  , isObject      = require(\"../object/is\")\n  , stringCoerce  = require(\"../string/coerce\")\n  , toShortString = require(\"./to-short-string\");\n\nvar resolveMessage = function (message, value) {\n\treturn message.replace(\"%v\", toShortString(value));\n};\n\nmodule.exports = function (value, defaultMessage, inputOptions) {\n\tif (!isObject(inputOptions)) throw new TypeError(resolveMessage(defaultMessage, value));\n\tif (!isValue(value)) {\n\t\tif (\"default\" in inputOptions) return inputOptions[\"default\"];\n\t\tif (inputOptions.isOptional) return null;\n\t}\n\tvar errorMessage = stringCoerce(inputOptions.errorMessage);\n\tif (!isValue(errorMessage)) errorMessage = defaultMessage;\n\tthrow new TypeError(resolveMessage(errorMessage, value));\n};\n","\"use strict\";\n\nvar resolveException = require(\"../lib/resolve-exception\")\n  , is               = require(\"./is\");\n\nmodule.exports = function (value/*, options*/) {\n\tif (is(value)) return value;\n\treturn resolveException(value, \"Cannot use %v\", arguments[1]);\n};\n","\"use strict\";\n\nvar resolveException = require(\"../lib/resolve-exception\")\n  , is               = require(\"./is\");\n\nmodule.exports = function (value/*, options*/) {\n\tif (is(value)) return value;\n\treturn resolveException(value, \"%v is not a plain function\", arguments[1]);\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar from = Array.from, arr, result;\n\tif (typeof from !== \"function\") return false;\n\tarr = [\"raz\", \"dwa\"];\n\tresult = from(arr);\n\treturn Boolean(result && result !== arr && result[1] === \"dwa\");\n};\n","\"use strict\";\n\nvar objToString = Object.prototype.toString\n  , isFunctionStringTag = RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);\n\nmodule.exports = function (value) {\n\treturn typeof value === \"function\" && isFunctionStringTag(objToString.call(value));\n};\n","\"use strict\";\n\nvar iteratorSymbol = require(\"es6-symbol\").iterator\n  , isArguments    = require(\"../../function/is-arguments\")\n  , isFunction     = require(\"../../function/is-function\")\n  , toPosInt       = require(\"../../number/to-pos-integer\")\n  , callable       = require(\"../../object/valid-callable\")\n  , validValue     = require(\"../../object/valid-value\")\n  , isValue        = require(\"../../object/is-value\")\n  , isString       = require(\"../../string/is-string\")\n  , isArray        = Array.isArray\n  , call           = Function.prototype.call\n  , desc           = { configurable: true, enumerable: true, writable: true, value: null }\n  , defineProperty = Object.defineProperty;\n\n// eslint-disable-next-line complexity, max-lines-per-function\nmodule.exports = function (arrayLike/*, mapFn, thisArg*/) {\n\tvar mapFn = arguments[1]\n\t  , thisArg = arguments[2]\n\t  , Context\n\t  , i\n\t  , j\n\t  , arr\n\t  , length\n\t  , code\n\t  , iterator\n\t  , result\n\t  , getIterator\n\t  , value;\n\n\tarrayLike = Object(validValue(arrayLike));\n\n\tif (isValue(mapFn)) callable(mapFn);\n\tif (!this || this === Array || !isFunction(this)) {\n\t\t// Result: Plain array\n\t\tif (!mapFn) {\n\t\t\tif (isArguments(arrayLike)) {\n\t\t\t\t// Source: Arguments\n\t\t\t\tlength = arrayLike.length;\n\t\t\t\tif (length !== 1) return Array.apply(null, arrayLike);\n\t\t\t\tarr = new Array(1);\n\t\t\t\tarr[0] = arrayLike[0];\n\t\t\t\treturn arr;\n\t\t\t}\n\t\t\tif (isArray(arrayLike)) {\n\t\t\t\t// Source: Array\n\t\t\t\tarr = new Array((length = arrayLike.length));\n\t\t\t\tfor (i = 0; i < length; ++i) arr[i] = arrayLike[i];\n\t\t\t\treturn arr;\n\t\t\t}\n\t\t}\n\t\tarr = [];\n\t} else {\n\t\t// Result: Non plain array\n\t\tContext = this;\n\t}\n\n\tif (!isArray(arrayLike)) {\n\t\tif ((getIterator = arrayLike[iteratorSymbol]) !== undefined) {\n\t\t\t// Source: Iterator\n\t\t\titerator = callable(getIterator).call(arrayLike);\n\t\t\tif (Context) arr = new Context();\n\t\t\tresult = iterator.next();\n\t\t\ti = 0;\n\t\t\twhile (!result.done) {\n\t\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, result.value, i) : result.value;\n\t\t\t\tif (Context) {\n\t\t\t\t\tdesc.value = value;\n\t\t\t\t\tdefineProperty(arr, i, desc);\n\t\t\t\t} else {\n\t\t\t\t\tarr[i] = value;\n\t\t\t\t}\n\t\t\t\tresult = iterator.next();\n\t\t\t\t++i;\n\t\t\t}\n\t\t\tlength = i;\n\t\t} else if (isString(arrayLike)) {\n\t\t\t// Source: String\n\t\t\tlength = arrayLike.length;\n\t\t\tif (Context) arr = new Context();\n\t\t\tfor (i = 0, j = 0; i < length; ++i) {\n\t\t\t\tvalue = arrayLike[i];\n\t\t\t\tif (i + 1 < length) {\n\t\t\t\t\tcode = value.charCodeAt(0);\n\t\t\t\t\t// eslint-disable-next-line max-depth\n\t\t\t\t\tif (code >= 0xd800 && code <= 0xdbff) value += arrayLike[++i];\n\t\t\t\t}\n\t\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, value, j) : value;\n\t\t\t\tif (Context) {\n\t\t\t\t\tdesc.value = value;\n\t\t\t\t\tdefineProperty(arr, j, desc);\n\t\t\t\t} else {\n\t\t\t\t\tarr[j] = value;\n\t\t\t\t}\n\t\t\t\t++j;\n\t\t\t}\n\t\t\tlength = j;\n\t\t}\n\t}\n\tif (length === undefined) {\n\t\t// Source: array or array-like\n\t\tlength = toPosInt(arrayLike.length);\n\t\tif (Context) arr = new Context(length);\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, arrayLike[i], i) : arrayLike[i];\n\t\t\tif (Context) {\n\t\t\t\tdesc.value = value;\n\t\t\t\tdefineProperty(arr, i, desc);\n\t\t\t} else {\n\t\t\t\tarr[i] = value;\n\t\t\t}\n\t\t}\n\t}\n\tif (Context) {\n\t\tdesc.value = null;\n\t\tarr.length = length;\n\t}\n\treturn arr;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Array.from : require(\"./shim\");\n","\"use strict\";\n\nvar aFrom  = require(\"../array/from\")\n  , assign = require(\"./assign\")\n  , value  = require(\"./valid-value\");\n\nmodule.exports = function (obj/*, propertyNames, options*/) {\n\tvar copy = Object(value(obj)), propertyNames = arguments[1], options = Object(arguments[2]);\n\tif (copy !== obj && !propertyNames) return copy;\n\tvar result = {};\n\tif (propertyNames) {\n\t\taFrom(propertyNames, function (propertyName) {\n\t\t\tif (options.ensure || propertyName in obj) result[propertyName] = obj[propertyName];\n\t\t});\n\t} else {\n\t\tassign(result, obj);\n\t}\n\treturn result;\n};\n","// Internal method, used by iteration functions.\n// Calls a function for each key-value pair found in object\n// Optionally takes compareFn to iterate object in specific order\n\n\"use strict\";\n\nvar callable                = require(\"./valid-callable\")\n  , value                   = require(\"./valid-value\")\n  , bind                    = Function.prototype.bind\n  , call                    = Function.prototype.call\n  , keys                    = Object.keys\n  , objPropertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (method, defVal) {\n\treturn function (obj, cb/*, thisArg, compareFn*/) {\n\t\tvar list, thisArg = arguments[2], compareFn = arguments[3];\n\t\tobj = Object(value(obj));\n\t\tcallable(cb);\n\n\t\tlist = keys(obj);\n\t\tif (compareFn) {\n\t\t\tlist.sort(typeof compareFn === \"function\" ? bind.call(compareFn, obj) : undefined);\n\t\t}\n\t\tif (typeof method !== \"function\") method = list[method];\n\t\treturn call.call(method, list, function (key, index) {\n\t\t\tif (!objPropertyIsEnumerable.call(obj, key)) return defVal;\n\t\t\treturn call.call(cb, thisArg, obj[key], key, obj, index);\n\t\t});\n\t};\n};\n","\"use strict\";\n\nmodule.exports = require(\"./_iterate\")(\"forEach\");\n","\"use strict\";\n\nvar callable = require(\"./valid-callable\")\n  , forEach  = require(\"./for-each\")\n  , call     = Function.prototype.call;\n\nmodule.exports = function (obj, cb/*, thisArg*/) {\n\tvar result = {}, thisArg = arguments[2];\n\tcallable(cb);\n\tforEach(obj, function (value, key, targetObj, index) {\n\t\tresult[key] = call.call(cb, thisArg, value, key, targetObj, index);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar isValue             = require(\"type/value/is\")\n  , ensureValue         = require(\"type/value/ensure\")\n  , ensurePlainFunction = require(\"type/plain-function/ensure\")\n  , copy                = require(\"es5-ext/object/copy\")\n  , normalizeOptions    = require(\"es5-ext/object/normalize-options\")\n  , map                 = require(\"es5-ext/object/map\");\n\nvar bind = Function.prototype.bind\n  , defineProperty = Object.defineProperty\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , define;\n\ndefine = function (name, desc, options) {\n\tvar value = ensureValue(desc) && ensurePlainFunction(desc.value), dgs;\n\tdgs = copy(desc);\n\tdelete dgs.writable;\n\tdelete dgs.value;\n\tdgs.get = function () {\n\t\tif (!options.overwriteDefinition && hasOwnProperty.call(this, name)) return value;\n\t\tdesc.value = bind.call(value, options.resolveContext ? options.resolveContext(this) : this);\n\t\tdefineProperty(this, name, desc);\n\t\treturn this[name];\n\t};\n\treturn dgs;\n};\n\nmodule.exports = function (props/*, options*/) {\n\tvar options = normalizeOptions(arguments[1]);\n\tif (isValue(options.resolveContext)) ensurePlainFunction(options.resolveContext);\n\treturn map(props, function (desc, name) { return define(name, desc, options); });\n};\n","\"use strict\";\n\nvar clear    = require(\"es5-ext/array/#/clear\")\n  , assign   = require(\"es5-ext/object/assign\")\n  , callable = require(\"es5-ext/object/valid-callable\")\n  , value    = require(\"es5-ext/object/valid-value\")\n  , d        = require(\"d\")\n  , autoBind = require(\"d/auto-bind\")\n  , Symbol   = require(\"es6-symbol\");\n\nvar defineProperty = Object.defineProperty, defineProperties = Object.defineProperties, Iterator;\n\nmodule.exports = Iterator = function (list, context) {\n\tif (!(this instanceof Iterator)) throw new TypeError(\"Constructor requires 'new'\");\n\tdefineProperties(this, {\n\t\t__list__: d(\"w\", value(list)),\n\t\t__context__: d(\"w\", context),\n\t\t__nextIndex__: d(\"w\", 0)\n\t});\n\tif (!context) return;\n\tcallable(context.on);\n\tcontext.on(\"_add\", this._onAdd);\n\tcontext.on(\"_delete\", this._onDelete);\n\tcontext.on(\"_clear\", this._onClear);\n};\n\n// Internal %IteratorPrototype% doesn't expose its constructor\ndelete Iterator.prototype.constructor;\n\ndefineProperties(\n\tIterator.prototype,\n\tassign(\n\t\t{\n\t\t\t_next: d(function () {\n\t\t\t\tvar i;\n\t\t\t\tif (!this.__list__) return undefined;\n\t\t\t\tif (this.__redo__) {\n\t\t\t\t\ti = this.__redo__.shift();\n\t\t\t\t\tif (i !== undefined) return i;\n\t\t\t\t}\n\t\t\t\tif (this.__nextIndex__ < this.__list__.length) return this.__nextIndex__++;\n\t\t\t\tthis._unBind();\n\t\t\t\treturn undefined;\n\t\t\t}),\n\t\t\tnext: d(function () {\n\t\t\t\treturn this._createResult(this._next());\n\t\t\t}),\n\t\t\t_createResult: d(function (i) {\n\t\t\t\tif (i === undefined) return { done: true, value: undefined };\n\t\t\t\treturn { done: false, value: this._resolve(i) };\n\t\t\t}),\n\t\t\t_resolve: d(function (i) {\n\t\t\t\treturn this.__list__[i];\n\t\t\t}),\n\t\t\t_unBind: d(function () {\n\t\t\t\tthis.__list__ = null;\n\t\t\t\tdelete this.__redo__;\n\t\t\t\tif (!this.__context__) return;\n\t\t\t\tthis.__context__.off(\"_add\", this._onAdd);\n\t\t\t\tthis.__context__.off(\"_delete\", this._onDelete);\n\t\t\t\tthis.__context__.off(\"_clear\", this._onClear);\n\t\t\t\tthis.__context__ = null;\n\t\t\t}),\n\t\t\ttoString: d(function () {\n\t\t\t\treturn \"[object \" + (this[Symbol.toStringTag] || \"Object\") + \"]\";\n\t\t\t})\n\t\t},\n\t\tautoBind({\n\t\t\t_onAdd: d(function (index) {\n\t\t\t\tif (index >= this.__nextIndex__) return;\n\t\t\t\t++this.__nextIndex__;\n\t\t\t\tif (!this.__redo__) {\n\t\t\t\t\tdefineProperty(this, \"__redo__\", d(\"c\", [index]));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.__redo__.forEach(function (redo, i) {\n\t\t\t\t\tif (redo >= index) this.__redo__[i] = ++redo;\n\t\t\t\t}, this);\n\t\t\t\tthis.__redo__.push(index);\n\t\t\t}),\n\t\t\t_onDelete: d(function (index) {\n\t\t\t\tvar i;\n\t\t\t\tif (index >= this.__nextIndex__) return;\n\t\t\t\t--this.__nextIndex__;\n\t\t\t\tif (!this.__redo__) return;\n\t\t\t\ti = this.__redo__.indexOf(index);\n\t\t\t\tif (i !== -1) this.__redo__.splice(i, 1);\n\t\t\t\tthis.__redo__.forEach(function (redo, j) {\n\t\t\t\t\tif (redo > index) this.__redo__[j] = --redo;\n\t\t\t\t}, this);\n\t\t\t}),\n\t\t\t_onClear: d(function () {\n\t\t\t\tif (this.__redo__) clear.call(this.__redo__);\n\t\t\t\tthis.__nextIndex__ = 0;\n\t\t\t})\n\t\t})\n\t)\n);\n\ndefineProperty(\n\tIterator.prototype,\n\tSymbol.iterator,\n\td(function () {\n\t\treturn this;\n\t})\n);\n","\"use strict\";\n\nvar setPrototypeOf = require(\"es5-ext/object/set-prototype-of\")\n  , contains       = require(\"es5-ext/string/#/contains\")\n  , d              = require(\"d\")\n  , Symbol         = require(\"es6-symbol\")\n  , Iterator       = require(\"./\");\n\nvar defineProperty = Object.defineProperty, ArrayIterator;\n\nArrayIterator = module.exports = function (arr, kind) {\n\tif (!(this instanceof ArrayIterator)) throw new TypeError(\"Constructor requires 'new'\");\n\tIterator.call(this, arr);\n\tif (!kind) kind = \"value\";\n\telse if (contains.call(kind, \"key+value\")) kind = \"key+value\";\n\telse if (contains.call(kind, \"key\")) kind = \"key\";\n\telse kind = \"value\";\n\tdefineProperty(this, \"__kind__\", d(\"\", kind));\n};\nif (setPrototypeOf) setPrototypeOf(ArrayIterator, Iterator);\n\n// Internal %ArrayIteratorPrototype% doesn't expose its constructor\ndelete ArrayIterator.prototype.constructor;\n\nArrayIterator.prototype = Object.create(Iterator.prototype, {\n\t_resolve: d(function (i) {\n\t\tif (this.__kind__ === \"value\") return this.__list__[i];\n\t\tif (this.__kind__ === \"key+value\") return [i, this.__list__[i]];\n\t\treturn i;\n\t})\n});\ndefineProperty(ArrayIterator.prototype, Symbol.toStringTag, d(\"c\", \"Array Iterator\"));\n","// Thanks @mathiasbynens\n// http://mathiasbynens.be/notes/javascript-unicode#iterating-over-symbols\n\n\"use strict\";\n\nvar setPrototypeOf = require(\"es5-ext/object/set-prototype-of\")\n  , d              = require(\"d\")\n  , Symbol         = require(\"es6-symbol\")\n  , Iterator       = require(\"./\");\n\nvar defineProperty = Object.defineProperty, StringIterator;\n\nStringIterator = module.exports = function (str) {\n\tif (!(this instanceof StringIterator)) throw new TypeError(\"Constructor requires 'new'\");\n\tstr = String(str);\n\tIterator.call(this, str);\n\tdefineProperty(this, \"__length__\", d(\"\", str.length));\n};\nif (setPrototypeOf) setPrototypeOf(StringIterator, Iterator);\n\n// Internal %ArrayIteratorPrototype% doesn't expose its constructor\ndelete StringIterator.prototype.constructor;\n\nStringIterator.prototype = Object.create(Iterator.prototype, {\n\t_next: d(function () {\n\t\tif (!this.__list__) return undefined;\n\t\tif (this.__nextIndex__ < this.__length__) return this.__nextIndex__++;\n\t\tthis._unBind();\n\t\treturn undefined;\n\t}),\n\t_resolve: d(function (i) {\n\t\tvar char = this.__list__[i], code;\n\t\tif (this.__nextIndex__ === this.__length__) return char;\n\t\tcode = char.charCodeAt(0);\n\t\tif (code >= 0xd800 && code <= 0xdbff) return char + this.__list__[this.__nextIndex__++];\n\t\treturn char;\n\t})\n});\ndefineProperty(StringIterator.prototype, Symbol.toStringTag, d(\"c\", \"String Iterator\"));\n","\"use strict\";\n\nvar isArguments    = require(\"es5-ext/function/is-arguments\")\n  , isString       = require(\"es5-ext/string/is-string\")\n  , ArrayIterator  = require(\"./array\")\n  , StringIterator = require(\"./string\")\n  , iterable       = require(\"./valid-iterable\")\n  , iteratorSymbol = require(\"es6-symbol\").iterator;\n\nmodule.exports = function (obj) {\n\tif (typeof iterable(obj)[iteratorSymbol] === \"function\") return obj[iteratorSymbol]();\n\tif (isArguments(obj)) return new ArrayIterator(obj);\n\tif (isString(obj)) return new StringIterator(obj);\n\treturn new ArrayIterator(obj);\n};\n","\"use strict\";\n\nvar isArguments = require(\"es5-ext/function/is-arguments\")\n  , callable    = require(\"es5-ext/object/valid-callable\")\n  , isString    = require(\"es5-ext/string/is-string\")\n  , get         = require(\"./get\");\n\nvar isArray = Array.isArray, call = Function.prototype.call, some = Array.prototype.some;\n\nmodule.exports = function (iterable, cb /*, thisArg*/) {\n\tvar mode, thisArg = arguments[2], result, doBreak, broken, i, length, char, code;\n\tif (isArray(iterable) || isArguments(iterable)) mode = \"array\";\n\telse if (isString(iterable)) mode = \"string\";\n\telse iterable = get(iterable);\n\n\tcallable(cb);\n\tdoBreak = function () {\n\t\tbroken = true;\n\t};\n\tif (mode === \"array\") {\n\t\tsome.call(iterable, function (value) {\n\t\t\tcall.call(cb, thisArg, value, doBreak);\n\t\t\treturn broken;\n\t\t});\n\t\treturn;\n\t}\n\tif (mode === \"string\") {\n\t\tlength = iterable.length;\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\tchar = iterable[i];\n\t\t\tif (i + 1 < length) {\n\t\t\t\tcode = char.charCodeAt(0);\n\t\t\t\tif (code >= 0xd800 && code <= 0xdbff) char += iterable[++i];\n\t\t\t}\n\t\t\tcall.call(cb, thisArg, char, doBreak);\n\t\t\tif (broken) break;\n\t\t}\n\t\treturn;\n\t}\n\tresult = iterable.next();\n\n\twhile (!result.done) {\n\t\tcall.call(cb, thisArg, result.value, doBreak);\n\t\tif (broken) return;\n\t\tresult = iterable.next();\n\t}\n};\n","\"use strict\";\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (arg/*, …args*/) {\n\tvar set = create(null);\n\tforEach.call(arguments, function (name) { set[name] = true; });\n\treturn set;\n};\n","'use strict';\n\nmodule.exports = require('es5-ext/object/primitive-set')('key',\n\t'value', 'key+value');\n","'use strict';\n\nvar setPrototypeOf    = require('es5-ext/object/set-prototype-of')\n  , d                 = require('d')\n  , Iterator          = require('es6-iterator')\n  , toStringTagSymbol = require('es6-symbol').toStringTag\n  , kinds             = require('./iterator-kinds')\n\n  , defineProperties = Object.defineProperties\n  , unBind = Iterator.prototype._unBind\n  , MapIterator;\n\nMapIterator = module.exports = function (map, kind) {\n\tif (!(this instanceof MapIterator)) return new MapIterator(map, kind);\n\tIterator.call(this, map.__mapKeysData__, map);\n\tif (!kind || !kinds[kind]) kind = 'key+value';\n\tdefineProperties(this, {\n\t\t__kind__: d('', kind),\n\t\t__values__: d('w', map.__mapValuesData__)\n\t});\n};\nif (setPrototypeOf) setPrototypeOf(MapIterator, Iterator);\n\nMapIterator.prototype = Object.create(Iterator.prototype, {\n\tconstructor: d(MapIterator),\n\t_resolve: d(function (i) {\n\t\tif (this.__kind__ === 'value') return this.__values__[i];\n\t\tif (this.__kind__ === 'key') return this.__list__[i];\n\t\treturn [this.__list__[i], this.__values__[i]];\n\t}),\n\t_unBind: d(function () {\n\t\tthis.__values__ = null;\n\t\tunBind.call(this);\n\t}),\n\ttoString: d(function () { return '[object Map Iterator]'; })\n});\nObject.defineProperty(MapIterator.prototype, toStringTagSymbol,\n\td('c', 'Map Iterator'));\n","// Exports true if environment provides native `Map` implementation,\n// whatever that is.\n\n'use strict';\n\nmodule.exports = (function () {\n\tif (typeof Map === 'undefined') return false;\n\treturn (Object.prototype.toString.call(new Map()) === '[object Map]');\n}());\n","'use strict';\n\nvar clear          = require('es5-ext/array/#/clear')\n  , eIndexOf       = require('es5-ext/array/#/e-index-of')\n  , setPrototypeOf = require('es5-ext/object/set-prototype-of')\n  , callable       = require('es5-ext/object/valid-callable')\n  , validValue     = require('es5-ext/object/valid-value')\n  , d              = require('d')\n  , ee             = require('event-emitter')\n  , Symbol         = require('es6-symbol')\n  , iterator       = require('es6-iterator/valid-iterable')\n  , forOf          = require('es6-iterator/for-of')\n  , Iterator       = require('./lib/iterator')\n  , isNative       = require('./is-native-implemented')\n\n  , call = Function.prototype.call\n  , defineProperties = Object.defineProperties, getPrototypeOf = Object.getPrototypeOf\n  , MapPoly;\n\nmodule.exports = MapPoly = function (/*iterable*/) {\n\tvar iterable = arguments[0], keys, values, self;\n\tif (!(this instanceof MapPoly)) throw new TypeError('Constructor requires \\'new\\'');\n\tif (isNative && setPrototypeOf && (Map !== MapPoly)) {\n\t\tself = setPrototypeOf(new Map(), getPrototypeOf(this));\n\t} else {\n\t\tself = this;\n\t}\n\tif (iterable != null) iterator(iterable);\n\tdefineProperties(self, {\n\t\t__mapKeysData__: d('c', keys = []),\n\t\t__mapValuesData__: d('c', values = [])\n\t});\n\tif (!iterable) return self;\n\tforOf(iterable, function (value) {\n\t\tvar key = validValue(value)[0];\n\t\tvalue = value[1];\n\t\tif (eIndexOf.call(keys, key) !== -1) return;\n\t\tkeys.push(key);\n\t\tvalues.push(value);\n\t}, self);\n\treturn self;\n};\n\nif (isNative) {\n\tif (setPrototypeOf) setPrototypeOf(MapPoly, Map);\n\tMapPoly.prototype = Object.create(Map.prototype, {\n\t\tconstructor: d(MapPoly)\n\t});\n}\n\nee(defineProperties(MapPoly.prototype, {\n\tclear: d(function () {\n\t\tif (!this.__mapKeysData__.length) return;\n\t\tclear.call(this.__mapKeysData__);\n\t\tclear.call(this.__mapValuesData__);\n\t\tthis.emit('_clear');\n\t}),\n\tdelete: d(function (key) {\n\t\tvar index = eIndexOf.call(this.__mapKeysData__, key);\n\t\tif (index === -1) return false;\n\t\tthis.__mapKeysData__.splice(index, 1);\n\t\tthis.__mapValuesData__.splice(index, 1);\n\t\tthis.emit('_delete', index, key);\n\t\treturn true;\n\t}),\n\tentries: d(function () { return new Iterator(this, 'key+value'); }),\n\tforEach: d(function (cb/*, thisArg*/) {\n\t\tvar thisArg = arguments[1], iterator, result;\n\t\tcallable(cb);\n\t\titerator = this.entries();\n\t\tresult = iterator._next();\n\t\twhile (result !== undefined) {\n\t\t\tcall.call(cb, thisArg, this.__mapValuesData__[result],\n\t\t\t\tthis.__mapKeysData__[result], this);\n\t\t\tresult = iterator._next();\n\t\t}\n\t}),\n\tget: d(function (key) {\n\t\tvar index = eIndexOf.call(this.__mapKeysData__, key);\n\t\tif (index === -1) return;\n\t\treturn this.__mapValuesData__[index];\n\t}),\n\thas: d(function (key) {\n\t\treturn (eIndexOf.call(this.__mapKeysData__, key) !== -1);\n\t}),\n\tkeys: d(function () { return new Iterator(this, 'key'); }),\n\tset: d(function (key, value) {\n\t\tvar index = eIndexOf.call(this.__mapKeysData__, key), emit;\n\t\tif (index === -1) {\n\t\t\tindex = this.__mapKeysData__.push(key) - 1;\n\t\t\temit = true;\n\t\t}\n\t\tthis.__mapValuesData__[index] = value;\n\t\tif (emit) this.emit('_add', index, key);\n\t\treturn this;\n\t}),\n\tsize: d.gs(function () { return this.__mapKeysData__.length; }),\n\tvalues: d(function () { return new Iterator(this, 'value'); }),\n\ttoString: d(function () { return '[object Map]'; })\n}));\nObject.defineProperty(MapPoly.prototype, Symbol.iterator, d(function () {\n\treturn this.entries();\n}));\nObject.defineProperty(MapPoly.prototype, Symbol.toStringTag, d('c', 'Map'));\n","'use strict';\n\nmodule.exports = require('./is-implemented')() ? Map : require('./polyfill');\n","import Map from 'es6-map';\n\nexport default ( Observer, options ) => {\n    var observer = new Observer( entries => entries.forEach( handle ), options )\n    var callbacks = new Map();\n    var handle = entry => {\n        var cbs = callbacks.get( entry.target );\n        if ( cbs ) cbs.forEach( cb => cb( entry ) );\n    }\n    var observe = ( el, cb ) => {\n        if ( callbacks.has( el ) ) {\n            callbacks.set( el, [ ...callbacks.get( el ), cb ] );\n        } else {\n            callbacks.set( el, [ cb ] );\n            observer.observe( el );\n        }\n    }\n    var unobserve = ( el, cb ) => {\n        var cbs = callbacks.get( el );\n        if ( cbs ) {\n            cbs = cbs.filter( x => x !== cb );\n            if ( cbs.length ) {\n                callbacks.set( el, cbs );\n            } else {\n                callbacks.delete( el );\n                observer.unobserve( el );\n            }\n        }\n    }\n    return { observe, unobserve };\n}","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n(function() {\n'use strict';\n\n// Exit early if we're not running in a browser.\nif (typeof window !== 'object') {\n  return;\n}\n\n// Exit early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * A local reference to the document.\n */\nvar document = window.document;\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n\n  if (parent && parent.assignedSlot) {\n    // If the parent is distributed in a <slot>, return the parent of a slot.\n    return parent.assignedSlot.parentNode;\n  }\n\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}());\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","/*! picturefill - v3.0.2 - 2016-02-12\n * https://scottjehl.github.io/picturefill/\n * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT\n */\n/*! Gecko-Picture - v1.0\n * https://github.com/scottjehl/picturefill/tree/3.0/src/plugins/gecko-picture\n * Firefox's early picture implementation (prior to FF41) is static and does\n * not react to viewport changes. This tiny module fixes this.\n */\n(function(window) {\n\t/*jshint eqnull:true */\n\tvar ua = navigator.userAgent;\n\n\tif ( window.HTMLPictureElement && ((/ecko/).test(ua) && ua.match(/rv\\:(\\d+)/) && RegExp.$1 < 45) ) {\n\t\taddEventListener(\"resize\", (function() {\n\t\t\tvar timer;\n\n\t\t\tvar dummySrc = document.createElement(\"source\");\n\n\t\t\tvar fixRespimg = function(img) {\n\t\t\t\tvar source, sizes;\n\t\t\t\tvar picture = img.parentNode;\n\n\t\t\t\tif (picture.nodeName.toUpperCase() === \"PICTURE\") {\n\t\t\t\t\tsource = dummySrc.cloneNode();\n\n\t\t\t\t\tpicture.insertBefore(source, picture.firstElementChild);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpicture.removeChild(source);\n\t\t\t\t\t});\n\t\t\t\t} else if (!img._pfLastSize || img.offsetWidth > img._pfLastSize) {\n\t\t\t\t\timg._pfLastSize = img.offsetWidth;\n\t\t\t\t\tsizes = img.sizes;\n\t\t\t\t\timg.sizes += \",100vw\";\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\timg.sizes = sizes;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar findPictureImgs = function() {\n\t\t\t\tvar i;\n\t\t\t\tvar imgs = document.querySelectorAll(\"picture > img, img[srcset][sizes]\");\n\t\t\t\tfor (i = 0; i < imgs.length; i++) {\n\t\t\t\t\tfixRespimg(imgs[i]);\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onResize = function() {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(findPictureImgs, 99);\n\t\t\t};\n\t\t\tvar mq = window.matchMedia && matchMedia(\"(orientation: landscape)\");\n\t\t\tvar init = function() {\n\t\t\t\tonResize();\n\n\t\t\t\tif (mq && mq.addListener) {\n\t\t\t\t\tmq.addListener(onResize);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdummySrc.srcset = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n\t\t\tif (/^[c|i]|d$/.test(document.readyState || \"\")) {\n\t\t\t\tinit();\n\t\t\t} else {\n\t\t\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\n\t\t\t}\n\n\t\t\treturn onResize;\n\t\t})());\n\t}\n})(window);\n\n/*! Picturefill - v3.0.2\n * http://scottjehl.github.io/picturefill\n * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt;\n *  License: MIT\n */\n\n(function( window, document, undefined ) {\n\t// Enable strict mode\n\t\"use strict\";\n\n\t// HTML shim|v it for old IE (IE9 will still need the HTML video tag workaround)\n\tdocument.createElement( \"picture\" );\n\n\tvar warn, eminpx, alwaysCheckWDescriptor, evalId;\n\t// local object for method references and testing exposure\n\tvar pf = {};\n\tvar isSupportTestReady = false;\n\tvar noop = function() {};\n\tvar image = document.createElement( \"img\" );\n\tvar getImgAttr = image.getAttribute;\n\tvar setImgAttr = image.setAttribute;\n\tvar removeImgAttr = image.removeAttribute;\n\tvar docElem = document.documentElement;\n\tvar types = {};\n\tvar cfg = {\n\t\t//resource selection:\n\t\talgorithm: \"\"\n\t};\n\tvar srcAttr = \"data-pfsrc\";\n\tvar srcsetAttr = srcAttr + \"set\";\n\t// ua sniffing is done for undetectable img loading features,\n\t// to do some non crucial perf optimizations\n\tvar ua = navigator.userAgent;\n\tvar supportAbort = (/rident/).test(ua) || ((/ecko/).test(ua) && ua.match(/rv\\:(\\d+)/) && RegExp.$1 > 35 );\n\tvar curSrcProp = \"currentSrc\";\n\tvar regWDesc = /\\s+\\+?\\d+(e\\d+)?w/;\n\tvar regSize = /(\\([^)]+\\))?\\s*(.+)/;\n\tvar setOptions = window.picturefillCFG;\n\t/**\n\t * Shortcut property for https://w3c.github.io/webappsec/specs/mixedcontent/#restricts-mixed-content ( for easy overriding in tests )\n\t */\n\t// baseStyle also used by getEmValue (i.e.: width: 1em is important)\n\tvar baseStyle = \"position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)\";\n\tvar fsCss = \"font-size:100%!important;\";\n\tvar isVwDirty = true;\n\n\tvar cssCache = {};\n\tvar sizeLengthCache = {};\n\tvar DPR = window.devicePixelRatio;\n\tvar units = {\n\t\tpx: 1,\n\t\t\"in\": 96\n\t};\n\tvar anchor = document.createElement( \"a\" );\n\t/**\n\t * alreadyRun flag used for setOptions. is it true setOptions will reevaluate\n\t * @type {boolean}\n\t */\n\tvar alreadyRun = false;\n\n\t// Reusable, non-\"g\" Regexes\n\n\t// (Don't use \\s, to avoid matching non-breaking space.)\n\tvar regexLeadingSpaces = /^[ \\t\\n\\r\\u000c]+/,\n\t    regexLeadingCommasOrSpaces = /^[, \\t\\n\\r\\u000c]+/,\n\t    regexLeadingNotSpaces = /^[^ \\t\\n\\r\\u000c]+/,\n\t    regexTrailingCommas = /[,]+$/,\n\t    regexNonNegativeInteger = /^\\d+$/,\n\n\t    // ( Positive or negative or unsigned integers or decimals, without or without exponents.\n\t    // Must include at least one digit.\n\t    // According to spec tests any decimal point must be followed by a digit.\n\t    // No leading plus sign is allowed.)\n\t    // https://html.spec.whatwg.org/multipage/infrastructure.html#valid-floating-point-number\n\t    regexFloatingPoint = /^-?(?:[0-9]+|[0-9]*\\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;\n\n\tvar on = function(obj, evt, fn, capture) {\n\t\tif ( obj.addEventListener ) {\n\t\t\tobj.addEventListener(evt, fn, capture || false);\n\t\t} else if ( obj.attachEvent ) {\n\t\t\tobj.attachEvent( \"on\" + evt, fn);\n\t\t}\n\t};\n\n\t/**\n\t * simple memoize function:\n\t */\n\n\tvar memoize = function(fn) {\n\t\tvar cache = {};\n\t\treturn function(input) {\n\t\t\tif ( !(input in cache) ) {\n\t\t\t\tcache[ input ] = fn(input);\n\t\t\t}\n\t\t\treturn cache[ input ];\n\t\t};\n\t};\n\n\t// UTILITY FUNCTIONS\n\n\t// Manual is faster than RegEx\n\t// http://jsperf.com/whitespace-character/5\n\tfunction isSpace(c) {\n\t\treturn (c === \"\\u0020\" || // space\n\t\t        c === \"\\u0009\" || // horizontal tab\n\t\t        c === \"\\u000A\" || // new line\n\t\t        c === \"\\u000C\" || // form feed\n\t\t        c === \"\\u000D\");  // carriage return\n\t}\n\n\t/**\n\t * gets a mediaquery and returns a boolean or gets a css length and returns a number\n\t * @param css mediaqueries or css length\n\t * @returns {boolean|number}\n\t *\n\t * based on: https://gist.github.com/jonathantneal/db4f77009b155f083738\n\t */\n\tvar evalCSS = (function() {\n\n\t\tvar regLength = /^([\\d\\.]+)(em|vw|px)$/;\n\t\tvar replace = function() {\n\t\t\tvar args = arguments, index = 0, string = args[0];\n\t\t\twhile (++index in args) {\n\t\t\t\tstring = string.replace(args[index], args[++index]);\n\t\t\t}\n\t\t\treturn string;\n\t\t};\n\n\t\tvar buildStr = memoize(function(css) {\n\n\t\t\treturn \"return \" + replace((css || \"\").toLowerCase(),\n\t\t\t\t// interpret `and`\n\t\t\t\t/\\band\\b/g, \"&&\",\n\n\t\t\t\t// interpret `,`\n\t\t\t\t/,/g, \"||\",\n\n\t\t\t\t// interpret `min-` as >=\n\t\t\t\t/min-([a-z-\\s]+):/g, \"e.$1>=\",\n\n\t\t\t\t// interpret `max-` as <=\n\t\t\t\t/max-([a-z-\\s]+):/g, \"e.$1<=\",\n\n\t\t\t\t//calc value\n\t\t\t\t/calc([^)]+)/g, \"($1)\",\n\n\t\t\t\t// interpret css values\n\t\t\t\t/(\\d+[\\.]*[\\d]*)([a-z]+)/g, \"($1 * e.$2)\",\n\t\t\t\t//make eval less evil\n\t\t\t\t/^(?!(e.[a-z]|[0-9\\.&=|><\\+\\-\\*\\(\\)\\/])).*/ig, \"\"\n\t\t\t) + \";\";\n\t\t});\n\n\t\treturn function(css, length) {\n\t\t\tvar parsedLength;\n\t\t\tif (!(css in cssCache)) {\n\t\t\t\tcssCache[css] = false;\n\t\t\t\tif (length && (parsedLength = css.match( regLength ))) {\n\t\t\t\t\tcssCache[css] = parsedLength[ 1 ] * units[parsedLength[ 2 ]];\n\t\t\t\t} else {\n\t\t\t\t\t/*jshint evil:true */\n\t\t\t\t\ttry{\n\t\t\t\t\t\tcssCache[css] = new Function(\"e\", buildStr(css))(units);\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t\t/*jshint evil:false */\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cssCache[css];\n\t\t};\n\t})();\n\n\tvar setResolution = function( candidate, sizesattr ) {\n\t\tif ( candidate.w ) { // h = means height: || descriptor.type === 'h' do not handle yet...\n\t\t\tcandidate.cWidth = pf.calcListLength( sizesattr || \"100vw\" );\n\t\t\tcandidate.res = candidate.w / candidate.cWidth ;\n\t\t} else {\n\t\t\tcandidate.res = candidate.d;\n\t\t}\n\t\treturn candidate;\n\t};\n\n\t/**\n\t *\n\t * @param opt\n\t */\n\tvar picturefill = function( opt ) {\n\n\t\tif (!isSupportTestReady) {return;}\n\n\t\tvar elements, i, plen;\n\n\t\tvar options = opt || {};\n\n\t\tif ( options.elements && options.elements.nodeType === 1 ) {\n\t\t\tif ( options.elements.nodeName.toUpperCase() === \"IMG\" ) {\n\t\t\t\toptions.elements =  [ options.elements ];\n\t\t\t} else {\n\t\t\t\toptions.context = options.elements;\n\t\t\t\toptions.elements =  null;\n\t\t\t}\n\t\t}\n\n\t\telements = options.elements || pf.qsa( (options.context || document), ( options.reevaluate || options.reselect ) ? pf.sel : pf.selShort );\n\n\t\tif ( (plen = elements.length) ) {\n\n\t\t\tpf.setupRun( options );\n\t\t\talreadyRun = true;\n\n\t\t\t// Loop through all elements\n\t\t\tfor ( i = 0; i < plen; i++ ) {\n\t\t\t\tpf.fillImg(elements[ i ], options);\n\t\t\t}\n\n\t\t\tpf.teardownRun( options );\n\t\t}\n\t};\n\n\t/**\n\t * outputs a warning for the developer\n\t * @param {message}\n\t * @type {Function}\n\t */\n\twarn = ( window.console && console.warn ) ?\n\t\tfunction( message ) {\n\t\t\tconsole.warn( message );\n\t\t} :\n\t\tnoop\n\t;\n\n\tif ( !(curSrcProp in image) ) {\n\t\tcurSrcProp = \"src\";\n\t}\n\n\t// Add support for standard mime types.\n\ttypes[ \"image/jpeg\" ] = true;\n\ttypes[ \"image/gif\" ] = true;\n\ttypes[ \"image/png\" ] = true;\n\n\tfunction detectTypeSupport( type, typeUri ) {\n\t\t// based on Modernizr's lossless img-webp test\n\t\t// note: asynchronous\n\t\tvar image = new window.Image();\n\t\timage.onerror = function() {\n\t\t\ttypes[ type ] = false;\n\t\t\tpicturefill();\n\t\t};\n\t\timage.onload = function() {\n\t\t\ttypes[ type ] = image.width === 1;\n\t\t\tpicturefill();\n\t\t};\n\t\timage.src = typeUri;\n\t\treturn \"pending\";\n\t}\n\n\t// test svg support\n\ttypes[ \"image/svg+xml\" ] = document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#Image\", \"1.1\" );\n\n\t/**\n\t * updates the internal vW property with the current viewport width in px\n\t */\n\tfunction updateMetrics() {\n\n\t\tisVwDirty = false;\n\t\tDPR = window.devicePixelRatio;\n\t\tcssCache = {};\n\t\tsizeLengthCache = {};\n\n\t\tpf.DPR = DPR || 1;\n\n\t\tunits.width = Math.max(window.innerWidth || 0, docElem.clientWidth);\n\t\tunits.height = Math.max(window.innerHeight || 0, docElem.clientHeight);\n\n\t\tunits.vw = units.width / 100;\n\t\tunits.vh = units.height / 100;\n\n\t\tevalId = [ units.height, units.width, DPR ].join(\"-\");\n\n\t\tunits.em = pf.getEmValue();\n\t\tunits.rem = units.em;\n\t}\n\n\tfunction chooseLowRes( lowerValue, higherValue, dprValue, isCached ) {\n\t\tvar bonusFactor, tooMuch, bonus, meanDensity;\n\n\t\t//experimental\n\t\tif (cfg.algorithm === \"saveData\" ){\n\t\t\tif ( lowerValue > 2.7 ) {\n\t\t\t\tmeanDensity = dprValue + 1;\n\t\t\t} else {\n\t\t\t\ttooMuch = higherValue - dprValue;\n\t\t\t\tbonusFactor = Math.pow(lowerValue - 0.6, 1.5);\n\n\t\t\t\tbonus = tooMuch * bonusFactor;\n\n\t\t\t\tif (isCached) {\n\t\t\t\t\tbonus += 0.1 * bonusFactor;\n\t\t\t\t}\n\n\t\t\t\tmeanDensity = lowerValue + bonus;\n\t\t\t}\n\t\t} else {\n\t\t\tmeanDensity = (dprValue > 1) ?\n\t\t\t\tMath.sqrt(lowerValue * higherValue) :\n\t\t\t\tlowerValue;\n\t\t}\n\n\t\treturn meanDensity > dprValue;\n\t}\n\n\tfunction applyBestCandidate( img ) {\n\t\tvar srcSetCandidates;\n\t\tvar matchingSet = pf.getSet( img );\n\t\tvar evaluated = false;\n\t\tif ( matchingSet !== \"pending\" ) {\n\t\t\tevaluated = evalId;\n\t\t\tif ( matchingSet ) {\n\t\t\t\tsrcSetCandidates = pf.setRes( matchingSet );\n\t\t\t\tpf.applySetCandidate( srcSetCandidates, img );\n\t\t\t}\n\t\t}\n\t\timg[ pf.ns ].evaled = evaluated;\n\t}\n\n\tfunction ascendingSort( a, b ) {\n\t\treturn a.res - b.res;\n\t}\n\n\tfunction setSrcToCur( img, src, set ) {\n\t\tvar candidate;\n\t\tif ( !set && src ) {\n\t\t\tset = img[ pf.ns ].sets;\n\t\t\tset = set && set[set.length - 1];\n\t\t}\n\n\t\tcandidate = getCandidateForSrc(src, set);\n\n\t\tif ( candidate ) {\n\t\t\tsrc = pf.makeUrl(src);\n\t\t\timg[ pf.ns ].curSrc = src;\n\t\t\timg[ pf.ns ].curCan = candidate;\n\n\t\t\tif ( !candidate.res ) {\n\t\t\t\tsetResolution( candidate, candidate.set.sizes );\n\t\t\t}\n\t\t}\n\t\treturn candidate;\n\t}\n\n\tfunction getCandidateForSrc( src, set ) {\n\t\tvar i, candidate, candidates;\n\t\tif ( src && set ) {\n\t\t\tcandidates = pf.parseSet( set );\n\t\t\tsrc = pf.makeUrl(src);\n\t\t\tfor ( i = 0; i < candidates.length; i++ ) {\n\t\t\t\tif ( src === pf.makeUrl(candidates[ i ].url) ) {\n\t\t\t\t\tcandidate = candidates[ i ];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn candidate;\n\t}\n\n\tfunction getAllSourceElements( picture, candidates ) {\n\t\tvar i, len, source, srcset;\n\n\t\t// SPEC mismatch intended for size and perf:\n\t\t// actually only source elements preceding the img should be used\n\t\t// also note: don't use qsa here, because IE8 sometimes doesn't like source as the key part in a selector\n\t\tvar sources = picture.getElementsByTagName( \"source\" );\n\n\t\tfor ( i = 0, len = sources.length; i < len; i++ ) {\n\t\t\tsource = sources[ i ];\n\t\t\tsource[ pf.ns ] = true;\n\t\t\tsrcset = source.getAttribute( \"srcset\" );\n\n\t\t\t// if source does not have a srcset attribute, skip\n\t\t\tif ( srcset ) {\n\t\t\t\tcandidates.push( {\n\t\t\t\t\tsrcset: srcset,\n\t\t\t\t\tmedia: source.getAttribute( \"media\" ),\n\t\t\t\t\ttype: source.getAttribute( \"type\" ),\n\t\t\t\t\tsizes: source.getAttribute( \"sizes\" )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Srcset Parser\n\t * By Alex Bell |  MIT License\n\t *\n\t * @returns Array [{url: _, d: _, w: _, h:_, set:_(????)}, ...]\n\t *\n\t * Based super duper closely on the reference algorithm at:\n\t * https://html.spec.whatwg.org/multipage/embedded-content.html#parse-a-srcset-attribute\n\t */\n\n\t// 1. Let input be the value passed to this algorithm.\n\t// (TO-DO : Explain what \"set\" argument is here. Maybe choose a more\n\t// descriptive & more searchable name.  Since passing the \"set\" in really has\n\t// nothing to do with parsing proper, I would prefer this assignment eventually\n\t// go in an external fn.)\n\tfunction parseSrcset(input, set) {\n\n\t\tfunction collectCharacters(regEx) {\n\t\t\tvar chars,\n\t\t\t    match = regEx.exec(input.substring(pos));\n\t\t\tif (match) {\n\t\t\t\tchars = match[ 0 ];\n\t\t\t\tpos += chars.length;\n\t\t\t\treturn chars;\n\t\t\t}\n\t\t}\n\n\t\tvar inputLength = input.length,\n\t\t    url,\n\t\t    descriptors,\n\t\t    currentDescriptor,\n\t\t    state,\n\t\t    c,\n\n\t\t    // 2. Let position be a pointer into input, initially pointing at the start\n\t\t    //    of the string.\n\t\t    pos = 0,\n\n\t\t    // 3. Let candidates be an initially empty source set.\n\t\t    candidates = [];\n\n\t\t/**\n\t\t* Adds descriptor properties to a candidate, pushes to the candidates array\n\t\t* @return undefined\n\t\t*/\n\t\t// (Declared outside of the while loop so that it's only created once.\n\t\t// (This fn is defined before it is used, in order to pass JSHINT.\n\t\t// Unfortunately this breaks the sequencing of the spec comments. :/ )\n\t\tfunction parseDescriptors() {\n\n\t\t\t// 9. Descriptor parser: Let error be no.\n\t\t\tvar pError = false,\n\n\t\t\t// 10. Let width be absent.\n\t\t\t// 11. Let density be absent.\n\t\t\t// 12. Let future-compat-h be absent. (We're implementing it now as h)\n\t\t\t    w, d, h, i,\n\t\t\t    candidate = {},\n\t\t\t    desc, lastChar, value, intVal, floatVal;\n\n\t\t\t// 13. For each descriptor in descriptors, run the appropriate set of steps\n\t\t\t// from the following list:\n\t\t\tfor (i = 0 ; i < descriptors.length; i++) {\n\t\t\t\tdesc = descriptors[ i ];\n\n\t\t\t\tlastChar = desc[ desc.length - 1 ];\n\t\t\t\tvalue = desc.substring(0, desc.length - 1);\n\t\t\t\tintVal = parseInt(value, 10);\n\t\t\t\tfloatVal = parseFloat(value);\n\n\t\t\t\t// If the descriptor consists of a valid non-negative integer followed by\n\t\t\t\t// a U+0077 LATIN SMALL LETTER W character\n\t\t\t\tif (regexNonNegativeInteger.test(value) && (lastChar === \"w\")) {\n\n\t\t\t\t\t// If width and density are not both absent, then let error be yes.\n\t\t\t\t\tif (w || d) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing non-negative integers to the descriptor.\n\t\t\t\t\t// If the result is zero, let error be yes.\n\t\t\t\t\t// Otherwise, let width be the result.\n\t\t\t\t\tif (intVal === 0) {pError = true;} else {w = intVal;}\n\n\t\t\t\t// If the descriptor consists of a valid floating-point number followed by\n\t\t\t\t// a U+0078 LATIN SMALL LETTER X character\n\t\t\t\t} else if (regexFloatingPoint.test(value) && (lastChar === \"x\")) {\n\n\t\t\t\t\t// If width, density and future-compat-h are not all absent, then let error\n\t\t\t\t\t// be yes.\n\t\t\t\t\tif (w || d || h) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing floating-point number values to the descriptor.\n\t\t\t\t\t// If the result is less than zero, let error be yes. Otherwise, let density\n\t\t\t\t\t// be the result.\n\t\t\t\t\tif (floatVal < 0) {pError = true;} else {d = floatVal;}\n\n\t\t\t\t// If the descriptor consists of a valid non-negative integer followed by\n\t\t\t\t// a U+0068 LATIN SMALL LETTER H character\n\t\t\t\t} else if (regexNonNegativeInteger.test(value) && (lastChar === \"h\")) {\n\n\t\t\t\t\t// If height and density are not both absent, then let error be yes.\n\t\t\t\t\tif (h || d) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing non-negative integers to the descriptor.\n\t\t\t\t\t// If the result is zero, let error be yes. Otherwise, let future-compat-h\n\t\t\t\t\t// be the result.\n\t\t\t\t\tif (intVal === 0) {pError = true;} else {h = intVal;}\n\n\t\t\t\t// Anything else, Let error be yes.\n\t\t\t\t} else {pError = true;}\n\t\t\t} // (close step 13 for loop)\n\n\t\t\t// 15. If error is still no, then append a new image source to candidates whose\n\t\t\t// URL is url, associated with a width width if not absent and a pixel\n\t\t\t// density density if not absent. Otherwise, there is a parse error.\n\t\t\tif (!pError) {\n\t\t\t\tcandidate.url = url;\n\n\t\t\t\tif (w) { candidate.w = w;}\n\t\t\t\tif (d) { candidate.d = d;}\n\t\t\t\tif (h) { candidate.h = h;}\n\t\t\t\tif (!h && !d && !w) {candidate.d = 1;}\n\t\t\t\tif (candidate.d === 1) {set.has1x = true;}\n\t\t\t\tcandidate.set = set;\n\n\t\t\t\tcandidates.push(candidate);\n\t\t\t}\n\t\t} // (close parseDescriptors fn)\n\n\t\t/**\n\t\t* Tokenizes descriptor properties prior to parsing\n\t\t* Returns undefined.\n\t\t* (Again, this fn is defined before it is used, in order to pass JSHINT.\n\t\t* Unfortunately this breaks the logical sequencing of the spec comments. :/ )\n\t\t*/\n\t\tfunction tokenize() {\n\n\t\t\t// 8.1. Descriptor tokeniser: Skip whitespace\n\t\t\tcollectCharacters(regexLeadingSpaces);\n\n\t\t\t// 8.2. Let current descriptor be the empty string.\n\t\t\tcurrentDescriptor = \"\";\n\n\t\t\t// 8.3. Let state be in descriptor.\n\t\t\tstate = \"in descriptor\";\n\n\t\t\twhile (true) {\n\n\t\t\t\t// 8.4. Let c be the character at position.\n\t\t\t\tc = input.charAt(pos);\n\n\t\t\t\t//  Do the following depending on the value of state.\n\t\t\t\t//  For the purpose of this step, \"EOF\" is a special character representing\n\t\t\t\t//  that position is past the end of input.\n\n\t\t\t\t// In descriptor\n\t\t\t\tif (state === \"in descriptor\") {\n\t\t\t\t\t// Do the following, depending on the value of c:\n\n\t\t\t\t  // Space character\n\t\t\t\t  // If current descriptor is not empty, append current descriptor to\n\t\t\t\t  // descriptors and let current descriptor be the empty string.\n\t\t\t\t  // Set state to after descriptor.\n\t\t\t\t\tif (isSpace(c)) {\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t\tcurrentDescriptor = \"\";\n\t\t\t\t\t\t\tstate = \"after descriptor\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// U+002C COMMA (,)\n\t\t\t\t\t// Advance position to the next character in input. If current descriptor\n\t\t\t\t\t// is not empty, append current descriptor to descriptors. Jump to the step\n\t\t\t\t\t// labeled descriptor parser.\n\t\t\t\t\t} else if (c === \",\") {\n\t\t\t\t\t\tpos += 1;\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// U+0028 LEFT PARENTHESIS (()\n\t\t\t\t\t// Append c to current descriptor. Set state to in parens.\n\t\t\t\t\t} else if (c === \"\\u0028\") {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t\tstate = \"in parens\";\n\n\t\t\t\t\t// EOF\n\t\t\t\t\t// If current descriptor is not empty, append current descriptor to\n\t\t\t\t\t// descriptors. Jump to the step labeled descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Append c to current descriptor.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t}\n\t\t\t\t// (end \"in descriptor\"\n\n\t\t\t\t// In parens\n\t\t\t\t} else if (state === \"in parens\") {\n\n\t\t\t\t\t// U+0029 RIGHT PARENTHESIS ())\n\t\t\t\t\t// Append c to current descriptor. Set state to in descriptor.\n\t\t\t\t\tif (c === \")\") {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t\tstate = \"in descriptor\";\n\n\t\t\t\t\t// EOF\n\t\t\t\t\t// Append current descriptor to descriptors. Jump to the step labeled\n\t\t\t\t\t// descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Append c to current descriptor.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t}\n\n\t\t\t\t// After descriptor\n\t\t\t\t} else if (state === \"after descriptor\") {\n\n\t\t\t\t\t// Do the following, depending on the value of c:\n\t\t\t\t\t// Space character: Stay in this state.\n\t\t\t\t\tif (isSpace(c)) {\n\n\t\t\t\t\t// EOF: Jump to the step labeled descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Set state to in descriptor. Set position to the previous character in input.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = \"in descriptor\";\n\t\t\t\t\t\tpos -= 1;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Advance position to the next character in input.\n\t\t\t\tpos += 1;\n\n\t\t\t// Repeat this step.\n\t\t\t} // (close while true loop)\n\t\t}\n\n\t\t// 4. Splitting loop: Collect a sequence of characters that are space\n\t\t//    characters or U+002C COMMA characters. If any U+002C COMMA characters\n\t\t//    were collected, that is a parse error.\n\t\twhile (true) {\n\t\t\tcollectCharacters(regexLeadingCommasOrSpaces);\n\n\t\t\t// 5. If position is past the end of input, return candidates and abort these steps.\n\t\t\tif (pos >= inputLength) {\n\t\t\t\treturn candidates; // (we're done, this is the sole return path)\n\t\t\t}\n\n\t\t\t// 6. Collect a sequence of characters that are not space characters,\n\t\t\t//    and let that be url.\n\t\t\turl = collectCharacters(regexLeadingNotSpaces);\n\n\t\t\t// 7. Let descriptors be a new empty list.\n\t\t\tdescriptors = [];\n\n\t\t\t// 8. If url ends with a U+002C COMMA character (,), follow these substeps:\n\t\t\t//\t\t(1). Remove all trailing U+002C COMMA characters from url. If this removed\n\t\t\t//         more than one character, that is a parse error.\n\t\t\tif (url.slice(-1) === \",\") {\n\t\t\t\turl = url.replace(regexTrailingCommas, \"\");\n\t\t\t\t// (Jump ahead to step 9 to skip tokenization and just push the candidate).\n\t\t\t\tparseDescriptors();\n\n\t\t\t//\tOtherwise, follow these substeps:\n\t\t\t} else {\n\t\t\t\ttokenize();\n\t\t\t} // (close else of step 8)\n\n\t\t// 16. Return to the step labeled splitting loop.\n\t\t} // (Close of big while loop.)\n\t}\n\n\t/*\n\t * Sizes Parser\n\t *\n\t * By Alex Bell |  MIT License\n\t *\n\t * Non-strict but accurate and lightweight JS Parser for the string value <img sizes=\"here\">\n\t *\n\t * Reference algorithm at:\n\t * https://html.spec.whatwg.org/multipage/embedded-content.html#parse-a-sizes-attribute\n\t *\n\t * Most comments are copied in directly from the spec\n\t * (except for comments in parens).\n\t *\n\t * Grammar is:\n\t * <source-size-list> = <source-size># [ , <source-size-value> ]? | <source-size-value>\n\t * <source-size> = <media-condition> <source-size-value>\n\t * <source-size-value> = <length>\n\t * http://www.w3.org/html/wg/drafts/html/master/embedded-content.html#attr-img-sizes\n\t *\n\t * E.g. \"(max-width: 30em) 100vw, (max-width: 50em) 70vw, 100vw\"\n\t * or \"(min-width: 30em), calc(30vw - 15px)\" or just \"30vw\"\n\t *\n\t * Returns the first valid <css-length> with a media condition that evaluates to true,\n\t * or \"100vw\" if all valid media conditions evaluate to false.\n\t *\n\t */\n\n\tfunction parseSizes(strValue) {\n\n\t\t// (Percentage CSS lengths are not allowed in this case, to avoid confusion:\n\t\t// https://html.spec.whatwg.org/multipage/embedded-content.html#valid-source-size-list\n\t\t// CSS allows a single optional plus or minus sign:\n\t\t// http://www.w3.org/TR/CSS2/syndata.html#numbers\n\t\t// CSS is ASCII case-insensitive:\n\t\t// http://www.w3.org/TR/CSS2/syndata.html#characters )\n\t\t// Spec allows exponential notation for <number> type:\n\t\t// http://dev.w3.org/csswg/css-values/#numbers\n\t\tvar regexCssLengthWithUnits = /^(?:[+-]?[0-9]+|[0-9]*\\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;\n\n\t\t// (This is a quick and lenient test. Because of optional unlimited-depth internal\n\t\t// grouping parens and strict spacing rules, this could get very complicated.)\n\t\tvar regexCssCalc = /^calc\\((?:[0-9a-z \\.\\+\\-\\*\\/\\(\\)]+)\\)$/i;\n\n\t\tvar i;\n\t\tvar unparsedSizesList;\n\t\tvar unparsedSizesListLength;\n\t\tvar unparsedSize;\n\t\tvar lastComponentValue;\n\t\tvar size;\n\n\t\t// UTILITY FUNCTIONS\n\n\t\t//  (Toy CSS parser. The goals here are:\n\t\t//  1) expansive test coverage without the weight of a full CSS parser.\n\t\t//  2) Avoiding regex wherever convenient.\n\t\t//  Quick tests: http://jsfiddle.net/gtntL4gr/3/\n\t\t//  Returns an array of arrays.)\n\t\tfunction parseComponentValues(str) {\n\t\t\tvar chrctr;\n\t\t\tvar component = \"\";\n\t\t\tvar componentArray = [];\n\t\t\tvar listArray = [];\n\t\t\tvar parenDepth = 0;\n\t\t\tvar pos = 0;\n\t\t\tvar inComment = false;\n\n\t\t\tfunction pushComponent() {\n\t\t\t\tif (component) {\n\t\t\t\t\tcomponentArray.push(component);\n\t\t\t\t\tcomponent = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction pushComponentArray() {\n\t\t\t\tif (componentArray[0]) {\n\t\t\t\t\tlistArray.push(componentArray);\n\t\t\t\t\tcomponentArray = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// (Loop forwards from the beginning of the string.)\n\t\t\twhile (true) {\n\t\t\t\tchrctr = str.charAt(pos);\n\n\t\t\t\tif (chrctr === \"\") { // ( End of string reached.)\n\t\t\t\t\tpushComponent();\n\t\t\t\t\tpushComponentArray();\n\t\t\t\t\treturn listArray;\n\t\t\t\t} else if (inComment) {\n\t\t\t\t\tif ((chrctr === \"*\") && (str[pos + 1] === \"/\")) { // (At end of a comment.)\n\t\t\t\t\t\tinComment = false;\n\t\t\t\t\t\tpos += 2;\n\t\t\t\t\t\tpushComponent();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpos += 1; // (Skip all characters inside comments.)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else if (isSpace(chrctr)) {\n\t\t\t\t\t// (If previous character in loop was also a space, or if\n\t\t\t\t\t// at the beginning of the string, do not add space char to\n\t\t\t\t\t// component.)\n\t\t\t\t\tif ( (str.charAt(pos - 1) && isSpace( str.charAt(pos - 1) ) ) || !component ) {\n\t\t\t\t\t\tpos += 1;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (parenDepth === 0) {\n\t\t\t\t\t\tpushComponent();\n\t\t\t\t\t\tpos +=1;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// (Replace any space character with a plain space for legibility.)\n\t\t\t\t\t\tchrctr = \" \";\n\t\t\t\t\t}\n\t\t\t\t} else if (chrctr === \"(\") {\n\t\t\t\t\tparenDepth += 1;\n\t\t\t\t} else if (chrctr === \")\") {\n\t\t\t\t\tparenDepth -= 1;\n\t\t\t\t} else if (chrctr === \",\") {\n\t\t\t\t\tpushComponent();\n\t\t\t\t\tpushComponentArray();\n\t\t\t\t\tpos += 1;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( (chrctr === \"/\") && (str.charAt(pos + 1) === \"*\") ) {\n\t\t\t\t\tinComment = true;\n\t\t\t\t\tpos += 2;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcomponent = component + chrctr;\n\t\t\t\tpos += 1;\n\t\t\t}\n\t\t}\n\n\t\tfunction isValidNonNegativeSourceSizeValue(s) {\n\t\t\tif (regexCssLengthWithUnits.test(s) && (parseFloat(s) >= 0)) {return true;}\n\t\t\tif (regexCssCalc.test(s)) {return true;}\n\t\t\t// ( http://www.w3.org/TR/CSS2/syndata.html#numbers says:\n\t\t\t// \"-0 is equivalent to 0 and is not a negative number.\" which means that\n\t\t\t// unitless zero and unitless negative zero must be accepted as special cases.)\n\t\t\tif ((s === \"0\") || (s === \"-0\") || (s === \"+0\")) {return true;}\n\t\t\treturn false;\n\t\t}\n\n\t\t// When asked to parse a sizes attribute from an element, parse a\n\t\t// comma-separated list of component values from the value of the element's\n\t\t// sizes attribute (or the empty string, if the attribute is absent), and let\n\t\t// unparsed sizes list be the result.\n\t\t// http://dev.w3.org/csswg/css-syntax/#parse-comma-separated-list-of-component-values\n\n\t\tunparsedSizesList = parseComponentValues(strValue);\n\t\tunparsedSizesListLength = unparsedSizesList.length;\n\n\t\t// For each unparsed size in unparsed sizes list:\n\t\tfor (i = 0; i < unparsedSizesListLength; i++) {\n\t\t\tunparsedSize = unparsedSizesList[i];\n\n\t\t\t// 1. Remove all consecutive <whitespace-token>s from the end of unparsed size.\n\t\t\t// ( parseComponentValues() already omits spaces outside of parens. )\n\n\t\t\t// If unparsed size is now empty, that is a parse error; continue to the next\n\t\t\t// iteration of this algorithm.\n\t\t\t// ( parseComponentValues() won't push an empty array. )\n\n\t\t\t// 2. If the last component value in unparsed size is a valid non-negative\n\t\t\t// <source-size-value>, let size be its value and remove the component value\n\t\t\t// from unparsed size. Any CSS function other than the calc() function is\n\t\t\t// invalid. Otherwise, there is a parse error; continue to the next iteration\n\t\t\t// of this algorithm.\n\t\t\t// http://dev.w3.org/csswg/css-syntax/#parse-component-value\n\t\t\tlastComponentValue = unparsedSize[unparsedSize.length - 1];\n\n\t\t\tif (isValidNonNegativeSourceSizeValue(lastComponentValue)) {\n\t\t\t\tsize = lastComponentValue;\n\t\t\t\tunparsedSize.pop();\n\t\t\t} else {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// 3. Remove all consecutive <whitespace-token>s from the end of unparsed\n\t\t\t// size. If unparsed size is now empty, return size and exit this algorithm.\n\t\t\t// If this was not the last item in unparsed sizes list, that is a parse error.\n\t\t\tif (unparsedSize.length === 0) {\n\t\t\t\treturn size;\n\t\t\t}\n\n\t\t\t// 4. Parse the remaining component values in unparsed size as a\n\t\t\t// <media-condition>. If it does not parse correctly, or it does parse\n\t\t\t// correctly but the <media-condition> evaluates to false, continue to the\n\t\t\t// next iteration of this algorithm.\n\t\t\t// (Parsing all possible compound media conditions in JS is heavy, complicated,\n\t\t\t// and the payoff is unclear. Is there ever an situation where the\n\t\t\t// media condition parses incorrectly but still somehow evaluates to true?\n\t\t\t// Can we just rely on the browser/polyfill to do it?)\n\t\t\tunparsedSize = unparsedSize.join(\" \");\n\t\t\tif (!(pf.matchesMedia( unparsedSize ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// 5. Return size and exit this algorithm.\n\t\t\treturn size;\n\t\t}\n\n\t\t// If the above algorithm exhausts unparsed sizes list without returning a\n\t\t// size value, return 100vw.\n\t\treturn \"100vw\";\n\t}\n\n\t// namespace\n\tpf.ns = (\"pf\" + new Date().getTime()).substr(0, 9);\n\n\t// srcset support test\n\tpf.supSrcset = \"srcset\" in image;\n\tpf.supSizes = \"sizes\" in image;\n\tpf.supPicture = !!window.HTMLPictureElement;\n\n\t// UC browser does claim to support srcset and picture, but not sizes,\n\t// this extended test reveals the browser does support nothing\n\tif (pf.supSrcset && pf.supPicture && !pf.supSizes) {\n\t\t(function(image2) {\n\t\t\timage.srcset = \"data:,a\";\n\t\t\timage2.src = \"data:,a\";\n\t\t\tpf.supSrcset = image.complete === image2.complete;\n\t\t\tpf.supPicture = pf.supSrcset && pf.supPicture;\n\t\t})(document.createElement(\"img\"));\n\t}\n\n\t// Safari9 has basic support for sizes, but does't expose the `sizes` idl attribute\n\tif (pf.supSrcset && !pf.supSizes) {\n\n\t\t(function() {\n\t\t\tvar width2 = \"data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==\";\n\t\t\tvar width1 = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\tvar test = function() {\n\t\t\t\tvar width = img.width;\n\n\t\t\t\tif (width === 2) {\n\t\t\t\t\tpf.supSizes = true;\n\t\t\t\t}\n\n\t\t\t\talwaysCheckWDescriptor = pf.supSrcset && !pf.supSizes;\n\n\t\t\t\tisSupportTestReady = true;\n\t\t\t\t// force async\n\t\t\t\tsetTimeout(picturefill);\n\t\t\t};\n\n\t\t\timg.onload = test;\n\t\t\timg.onerror = test;\n\t\t\timg.setAttribute(\"sizes\", \"9px\");\n\n\t\t\timg.srcset = width1 + \" 1w,\" + width2 + \" 9w\";\n\t\t\timg.src = width1;\n\t\t})();\n\n\t} else {\n\t\tisSupportTestReady = true;\n\t}\n\n\t// using pf.qsa instead of dom traversing does scale much better,\n\t// especially on sites mixing responsive and non-responsive images\n\tpf.selShort = \"picture>img,img[srcset]\";\n\tpf.sel = pf.selShort;\n\tpf.cfg = cfg;\n\n\t/**\n\t * Shortcut property for `devicePixelRatio` ( for easy overriding in tests )\n\t */\n\tpf.DPR = (DPR  || 1 );\n\tpf.u = units;\n\n\t// container of supported mime types that one might need to qualify before using\n\tpf.types =  types;\n\n\tpf.setSize = noop;\n\n\t/**\n\t * Gets a string and returns the absolute URL\n\t * @param src\n\t * @returns {String} absolute URL\n\t */\n\n\tpf.makeUrl = memoize(function(src) {\n\t\tanchor.href = src;\n\t\treturn anchor.href;\n\t});\n\n\t/**\n\t * Gets a DOM element or document and a selctor and returns the found matches\n\t * Can be extended with jQuery/Sizzle for IE7 support\n\t * @param context\n\t * @param sel\n\t * @returns {NodeList|Array}\n\t */\n\tpf.qsa = function(context, sel) {\n\t\treturn ( \"querySelector\" in context ) ? context.querySelectorAll(sel) : [];\n\t};\n\n\t/**\n\t * Shortcut method for matchMedia ( for easy overriding in tests )\n\t * wether native or pf.mMQ is used will be decided lazy on first call\n\t * @returns {boolean}\n\t */\n\tpf.matchesMedia = function() {\n\t\tif ( window.matchMedia && (matchMedia( \"(min-width: 0.1em)\" ) || {}).matches ) {\n\t\t\tpf.matchesMedia = function( media ) {\n\t\t\t\treturn !media || ( matchMedia( media ).matches );\n\t\t\t};\n\t\t} else {\n\t\t\tpf.matchesMedia = pf.mMQ;\n\t\t}\n\n\t\treturn pf.matchesMedia.apply( this, arguments );\n\t};\n\n\t/**\n\t * A simplified matchMedia implementation for IE8 and IE9\n\t * handles only min-width/max-width with px or em values\n\t * @param media\n\t * @returns {boolean}\n\t */\n\tpf.mMQ = function( media ) {\n\t\treturn media ? evalCSS(media) : true;\n\t};\n\n\t/**\n\t * Returns the calculated length in css pixel from the given sourceSizeValue\n\t * http://dev.w3.org/csswg/css-values-3/#length-value\n\t * intended Spec mismatches:\n\t * * Does not check for invalid use of CSS functions\n\t * * Does handle a computed length of 0 the same as a negative and therefore invalid value\n\t * @param sourceSizeValue\n\t * @returns {Number}\n\t */\n\tpf.calcLength = function( sourceSizeValue ) {\n\n\t\tvar value = evalCSS(sourceSizeValue, true) || false;\n\t\tif (value < 0) {\n\t\t\tvalue = false;\n\t\t}\n\n\t\treturn value;\n\t};\n\n\t/**\n\t * Takes a type string and checks if its supported\n\t */\n\n\tpf.supportsType = function( type ) {\n\t\treturn ( type ) ? types[ type ] : true;\n\t};\n\n\t/**\n\t * Parses a sourceSize into mediaCondition (media) and sourceSizeValue (length)\n\t * @param sourceSizeStr\n\t * @returns {*}\n\t */\n\tpf.parseSize = memoize(function( sourceSizeStr ) {\n\t\tvar match = ( sourceSizeStr || \"\" ).match(regSize);\n\t\treturn {\n\t\t\tmedia: match && match[1],\n\t\t\tlength: match && match[2]\n\t\t};\n\t});\n\n\tpf.parseSet = function( set ) {\n\t\tif ( !set.cands ) {\n\t\t\tset.cands = parseSrcset(set.srcset, set);\n\t\t}\n\t\treturn set.cands;\n\t};\n\n\t/**\n\t * returns 1em in css px for html/body default size\n\t * function taken from respondjs\n\t * @returns {*|number}\n\t */\n\tpf.getEmValue = function() {\n\t\tvar body;\n\t\tif ( !eminpx && (body = document.body) ) {\n\t\t\tvar div = document.createElement( \"div\" ),\n\t\t\t\toriginalHTMLCSS = docElem.style.cssText,\n\t\t\t\toriginalBodyCSS = body.style.cssText;\n\n\t\t\tdiv.style.cssText = baseStyle;\n\n\t\t\t// 1em in a media query is the value of the default font size of the browser\n\t\t\t// reset docElem and body to ensure the correct value is returned\n\t\t\tdocElem.style.cssText = fsCss;\n\t\t\tbody.style.cssText = fsCss;\n\n\t\t\tbody.appendChild( div );\n\t\t\teminpx = div.offsetWidth;\n\t\t\tbody.removeChild( div );\n\n\t\t\t//also update eminpx before returning\n\t\t\teminpx = parseFloat( eminpx, 10 );\n\n\t\t\t// restore the original values\n\t\t\tdocElem.style.cssText = originalHTMLCSS;\n\t\t\tbody.style.cssText = originalBodyCSS;\n\n\t\t}\n\t\treturn eminpx || 16;\n\t};\n\n\t/**\n\t * Takes a string of sizes and returns the width in pixels as a number\n\t */\n\tpf.calcListLength = function( sourceSizeListStr ) {\n\t\t// Split up source size list, ie ( max-width: 30em ) 100%, ( max-width: 50em ) 50%, 33%\n\t\t//\n\t\t//                           or (min-width:30em) calc(30% - 15px)\n\t\tif ( !(sourceSizeListStr in sizeLengthCache) || cfg.uT ) {\n\t\t\tvar winningLength = pf.calcLength( parseSizes( sourceSizeListStr ) );\n\n\t\t\tsizeLengthCache[ sourceSizeListStr ] = !winningLength ? units.width : winningLength;\n\t\t}\n\n\t\treturn sizeLengthCache[ sourceSizeListStr ];\n\t};\n\n\t/**\n\t * Takes a candidate object with a srcset property in the form of url/\n\t * ex. \"images/pic-medium.png 1x, images/pic-medium-2x.png 2x\" or\n\t *     \"images/pic-medium.png 400w, images/pic-medium-2x.png 800w\" or\n\t *     \"images/pic-small.png\"\n\t * Get an array of image candidates in the form of\n\t *      {url: \"/foo/bar.png\", resolution: 1}\n\t * where resolution is http://dev.w3.org/csswg/css-values-3/#resolution-value\n\t * If sizes is specified, res is calculated\n\t */\n\tpf.setRes = function( set ) {\n\t\tvar candidates;\n\t\tif ( set ) {\n\n\t\t\tcandidates = pf.parseSet( set );\n\n\t\t\tfor ( var i = 0, len = candidates.length; i < len; i++ ) {\n\t\t\t\tsetResolution( candidates[ i ], set.sizes );\n\t\t\t}\n\t\t}\n\t\treturn candidates;\n\t};\n\n\tpf.setRes.res = setResolution;\n\n\tpf.applySetCandidate = function( candidates, img ) {\n\t\tif ( !candidates.length ) {return;}\n\t\tvar candidate,\n\t\t\ti,\n\t\t\tj,\n\t\t\tlength,\n\t\t\tbestCandidate,\n\t\t\tcurSrc,\n\t\t\tcurCan,\n\t\t\tcandidateSrc,\n\t\t\tabortCurSrc;\n\n\t\tvar imageData = img[ pf.ns ];\n\t\tvar dpr = pf.DPR;\n\n\t\tcurSrc = imageData.curSrc || img[curSrcProp];\n\n\t\tcurCan = imageData.curCan || setSrcToCur(img, curSrc, candidates[0].set);\n\n\t\t// if we have a current source, we might either become lazy or give this source some advantage\n\t\tif ( curCan && curCan.set === candidates[ 0 ].set ) {\n\n\t\t\t// if browser can abort image request and the image has a higher pixel density than needed\n\t\t\t// and this image isn't downloaded yet, we skip next part and try to save bandwidth\n\t\t\tabortCurSrc = (supportAbort && !img.complete && curCan.res - 0.1 > dpr);\n\n\t\t\tif ( !abortCurSrc ) {\n\t\t\t\tcurCan.cached = true;\n\n\t\t\t\t// if current candidate is \"best\", \"better\" or \"okay\",\n\t\t\t\t// set it to bestCandidate\n\t\t\t\tif ( curCan.res >= dpr ) {\n\t\t\t\t\tbestCandidate = curCan;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( !bestCandidate ) {\n\n\t\t\tcandidates.sort( ascendingSort );\n\n\t\t\tlength = candidates.length;\n\t\t\tbestCandidate = candidates[ length - 1 ];\n\n\t\t\tfor ( i = 0; i < length; i++ ) {\n\t\t\t\tcandidate = candidates[ i ];\n\t\t\t\tif ( candidate.res >= dpr ) {\n\t\t\t\t\tj = i - 1;\n\n\t\t\t\t\t// we have found the perfect candidate,\n\t\t\t\t\t// but let's improve this a little bit with some assumptions ;-)\n\t\t\t\t\tif (candidates[ j ] &&\n\t\t\t\t\t\t(abortCurSrc || curSrc !== pf.makeUrl( candidate.url )) &&\n\t\t\t\t\t\tchooseLowRes(candidates[ j ].res, candidate.res, dpr, candidates[ j ].cached)) {\n\n\t\t\t\t\t\tbestCandidate = candidates[ j ];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbestCandidate = candidate;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( bestCandidate ) {\n\n\t\t\tcandidateSrc = pf.makeUrl( bestCandidate.url );\n\n\t\t\timageData.curSrc = candidateSrc;\n\t\t\timageData.curCan = bestCandidate;\n\n\t\t\tif ( candidateSrc !== curSrc ) {\n\t\t\t\tpf.setSrc( img, bestCandidate );\n\t\t\t}\n\t\t\tpf.setSize( img );\n\t\t}\n\t};\n\n\tpf.setSrc = function( img, bestCandidate ) {\n\t\tvar origWidth;\n\t\timg.src = bestCandidate.url;\n\n\t\t// although this is a specific Safari issue, we don't want to take too much different code paths\n\t\tif ( bestCandidate.set.type === \"image/svg+xml\" ) {\n\t\t\torigWidth = img.style.width;\n\t\t\timg.style.width = (img.offsetWidth + 1) + \"px\";\n\n\t\t\t// next line only should trigger a repaint\n\t\t\t// if... is only done to trick dead code removal\n\t\t\tif ( img.offsetWidth + 1 ) {\n\t\t\t\timg.style.width = origWidth;\n\t\t\t}\n\t\t}\n\t};\n\n\tpf.getSet = function( img ) {\n\t\tvar i, set, supportsType;\n\t\tvar match = false;\n\t\tvar sets = img [ pf.ns ].sets;\n\n\t\tfor ( i = 0; i < sets.length && !match; i++ ) {\n\t\t\tset = sets[i];\n\n\t\t\tif ( !set.srcset || !pf.matchesMedia( set.media ) || !(supportsType = pf.supportsType( set.type )) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( supportsType === \"pending\" ) {\n\t\t\t\tset = supportsType;\n\t\t\t}\n\n\t\t\tmatch = set;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tpf.parseSets = function( element, parent, options ) {\n\t\tvar srcsetAttribute, imageSet, isWDescripor, srcsetParsed;\n\n\t\tvar hasPicture = parent && parent.nodeName.toUpperCase() === \"PICTURE\";\n\t\tvar imageData = element[ pf.ns ];\n\n\t\tif ( imageData.src === undefined || options.src ) {\n\t\t\timageData.src = getImgAttr.call( element, \"src\" );\n\t\t\tif ( imageData.src ) {\n\t\t\t\tsetImgAttr.call( element, srcAttr, imageData.src );\n\t\t\t} else {\n\t\t\t\tremoveImgAttr.call( element, srcAttr );\n\t\t\t}\n\t\t}\n\n\t\tif ( imageData.srcset === undefined || options.srcset || !pf.supSrcset || element.srcset ) {\n\t\t\tsrcsetAttribute = getImgAttr.call( element, \"srcset\" );\n\t\t\timageData.srcset = srcsetAttribute;\n\t\t\tsrcsetParsed = true;\n\t\t}\n\n\t\timageData.sets = [];\n\n\t\tif ( hasPicture ) {\n\t\t\timageData.pic = true;\n\t\t\tgetAllSourceElements( parent, imageData.sets );\n\t\t}\n\n\t\tif ( imageData.srcset ) {\n\t\t\timageSet = {\n\t\t\t\tsrcset: imageData.srcset,\n\t\t\t\tsizes: getImgAttr.call( element, \"sizes\" )\n\t\t\t};\n\n\t\t\timageData.sets.push( imageSet );\n\n\t\t\tisWDescripor = (alwaysCheckWDescriptor || imageData.src) && regWDesc.test(imageData.srcset || \"\");\n\n\t\t\t// add normal src as candidate, if source has no w descriptor\n\t\t\tif ( !isWDescripor && imageData.src && !getCandidateForSrc(imageData.src, imageSet) && !imageSet.has1x ) {\n\t\t\t\timageSet.srcset += \", \" + imageData.src;\n\t\t\t\timageSet.cands.push({\n\t\t\t\t\turl: imageData.src,\n\t\t\t\t\td: 1,\n\t\t\t\t\tset: imageSet\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else if ( imageData.src ) {\n\t\t\timageData.sets.push( {\n\t\t\t\tsrcset: imageData.src,\n\t\t\t\tsizes: null\n\t\t\t} );\n\t\t}\n\n\t\timageData.curCan = null;\n\t\timageData.curSrc = undefined;\n\n\t\t// if img has picture or the srcset was removed or has a srcset and does not support srcset at all\n\t\t// or has a w descriptor (and does not support sizes) set support to false to evaluate\n\t\timageData.supported = !( hasPicture || ( imageSet && !pf.supSrcset ) || (isWDescripor && !pf.supSizes) );\n\n\t\tif ( srcsetParsed && pf.supSrcset && !imageData.supported ) {\n\t\t\tif ( srcsetAttribute ) {\n\t\t\t\tsetImgAttr.call( element, srcsetAttr, srcsetAttribute );\n\t\t\t\telement.srcset = \"\";\n\t\t\t} else {\n\t\t\t\tremoveImgAttr.call( element, srcsetAttr );\n\t\t\t}\n\t\t}\n\n\t\tif (imageData.supported && !imageData.srcset && ((!imageData.src && element.src) ||  element.src !== pf.makeUrl(imageData.src))) {\n\t\t\tif (imageData.src === null) {\n\t\t\t\telement.removeAttribute(\"src\");\n\t\t\t} else {\n\t\t\t\telement.src = imageData.src;\n\t\t\t}\n\t\t}\n\n\t\timageData.parsed = true;\n\t};\n\n\tpf.fillImg = function(element, options) {\n\t\tvar imageData;\n\t\tvar extreme = options.reselect || options.reevaluate;\n\n\t\t// expando for caching data on the img\n\t\tif ( !element[ pf.ns ] ) {\n\t\t\telement[ pf.ns ] = {};\n\t\t}\n\n\t\timageData = element[ pf.ns ];\n\n\t\t// if the element has already been evaluated, skip it\n\t\t// unless `options.reevaluate` is set to true ( this, for example,\n\t\t// is set to true when running `picturefill` on `resize` ).\n\t\tif ( !extreme && imageData.evaled === evalId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !imageData.parsed || options.reevaluate ) {\n\t\t\tpf.parseSets( element, element.parentNode, options );\n\t\t}\n\n\t\tif ( !imageData.supported ) {\n\t\t\tapplyBestCandidate( element );\n\t\t} else {\n\t\t\timageData.evaled = evalId;\n\t\t}\n\t};\n\n\tpf.setupRun = function() {\n\t\tif ( !alreadyRun || isVwDirty || (DPR !== window.devicePixelRatio) ) {\n\t\t\tupdateMetrics();\n\t\t}\n\t};\n\n\t// If picture is supported, well, that's awesome.\n\tif ( pf.supPicture ) {\n\t\tpicturefill = noop;\n\t\tpf.fillImg = noop;\n\t} else {\n\n\t\t // Set up picture polyfill by polling the document\n\t\t(function() {\n\t\t\tvar isDomReady;\n\t\t\tvar regReady = window.attachEvent ? /d$|^c/ : /d$|^c|^i/;\n\n\t\t\tvar run = function() {\n\t\t\t\tvar readyState = document.readyState || \"\";\n\n\t\t\t\ttimerId = setTimeout(run, readyState === \"loading\" ? 200 :  999);\n\t\t\t\tif ( document.body ) {\n\t\t\t\t\tpf.fillImgs();\n\t\t\t\t\tisDomReady = isDomReady || regReady.test(readyState);\n\t\t\t\t\tif ( isDomReady ) {\n\t\t\t\t\t\tclearTimeout( timerId );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar timerId = setTimeout(run, document.body ? 9 : 99);\n\n\t\t\t// Also attach picturefill on resize and readystatechange\n\t\t\t// http://modernjavascript.blogspot.com/2013/08/building-better-debounce.html\n\t\t\tvar debounce = function(func, wait) {\n\t\t\t\tvar timeout, timestamp;\n\t\t\t\tvar later = function() {\n\t\t\t\t\tvar last = (new Date()) - timestamp;\n\n\t\t\t\t\tif (last < wait) {\n\t\t\t\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\tfunc();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn function() {\n\t\t\t\t\ttimestamp = new Date();\n\n\t\t\t\t\tif (!timeout) {\n\t\t\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tvar lastClientWidth = docElem.clientHeight;\n\t\t\tvar onResize = function() {\n\t\t\t\tisVwDirty = Math.max(window.innerWidth || 0, docElem.clientWidth) !== units.width || docElem.clientHeight !== lastClientWidth;\n\t\t\t\tlastClientWidth = docElem.clientHeight;\n\t\t\t\tif ( isVwDirty ) {\n\t\t\t\t\tpf.fillImgs();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ton( window, \"resize\", debounce(onResize, 99 ) );\n\t\t\ton( document, \"readystatechange\", run );\n\t\t})();\n\t}\n\n\tpf.picturefill = picturefill;\n\t//use this internally for easy monkey patching/performance testing\n\tpf.fillImgs = picturefill;\n\tpf.teardownRun = noop;\n\n\t/* expose methods for testing */\n\tpicturefill._ = pf;\n\n\twindow.picturefillCFG = {\n\t\tpf: pf,\n\t\tpush: function(args) {\n\t\t\tvar name = args.shift();\n\t\t\tif (typeof pf[name] === \"function\") {\n\t\t\t\tpf[name].apply(pf, args);\n\t\t\t} else {\n\t\t\t\tcfg[name] = args[0];\n\t\t\t\tif (alreadyRun) {\n\t\t\t\t\tpf.fillImgs( { reselect: true } );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\twhile (setOptions && setOptions.length) {\n\t\twindow.picturefillCFG.push(setOptions.shift());\n\t}\n\n\t/* expose picturefill */\n\twindow.picturefill = picturefill;\n\n\t/* expose picturefill */\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// CommonJS, just export\n\t\tmodule.exports = picturefill;\n\t} else if ( typeof define === \"function\" && define.amd ) {\n\t\t// AMD support\n\t\tdefine( \"picturefill\", function() { return picturefill; } );\n\t}\n\n\t// IE8 evals this sync, so it must be the last thing we do\n\tif ( !pf.supPicture ) {\n\t\ttypes[ \"image/webp\" ] = detectTypeSupport(\"image/webp\", \"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==\" );\n\t}\n\n} )( window, document );\n","import createObserver from './utils/observer';\nimport 'intersection-observer';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport picturefill from 'picturefill';\n\nvar resizeObserver = createObserver( ResizeObserver );\nvar intersectionObserver = createObserver( IntersectionObserver, { rootMargin: '100% 0% 100% 0%' } );\n\n[ ...document.querySelectorAll('img[data-srcset]') ].forEach( img => {\n    var update = width => img.setAttribute( 'sizes', width + 'px' );\n    var onResize = entry => {\n        update( entry.contentRect.width );\n        picturefill({ reevaluate: true, elements: [ img ] })\n    }\n    var onIntersect = entry => {\n        if ( entry.isIntersecting ) {\n            update( img.getBoundingClientRect().width );\n            img.setAttribute( 'srcset', img.dataset.srcset );\n            resizeObserver.observe( img, onResize )\n            picturefill({ reevaluate: true, elements: [ img ] })\n        } else {\n            resizeObserver.unobserve( img, onResize )\n        }\n    }\n    intersectionObserver.observe( img, onIntersect );\n})","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","/**\r\n * Simple shims for WeakMap and Map classes.\r\n * This implementation is not meant to be used outside of IntersectionObserver modules\r\n * because it covers only limited range of use cases.\r\n */\r\n\r\nconst hasNativeCollections =\r\n    typeof window.WeakMap === 'function' &&\r\n    typeof window.Map === 'function';\r\n\r\nconst WeakMap = (function () {\r\n    if (hasNativeCollections) {\r\n        return window.WeakMap;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {Object} key\r\n     * @returns {Number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        let result = -1;\r\n\r\n        arr.some((entry, index) => {\r\n            let matches = entry[0] === key;\r\n\r\n            if (matches) {\r\n                result = index;\r\n            }\r\n\r\n            return matches;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    return class {\r\n        constructor() {\r\n            this.__entries__ = [];\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {Object} key\r\n         * @returns {*}\r\n         */\r\n        get(key) {\r\n            let index = getIndex(this.__entries__, key);\r\n\r\n            return this.__entries__[index][1];\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {Object} key\r\n         * @param {*} value\r\n         */\r\n        set(key, value) {\r\n            let index = getIndex(this.__entries__, key);\r\n\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            } else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {Object} key\r\n         */\r\n        delete(key) {\r\n            let entries = this.__entries__,\r\n                index = getIndex(entries, key);\r\n\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {Object} key\r\n         * @returns {Boolean}\r\n         */\r\n        has(key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        }\r\n    };\r\n})();\r\n\r\nconst Map = (function () {\r\n    if (hasNativeCollections) {\r\n        return window.Map;\r\n    }\r\n\r\n    return class extends WeakMap {\r\n        /**\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        get size() {\r\n            return this.__entries__.length;\r\n        }\r\n\r\n        clear() {\r\n            this.__entries__.splice(0, this.__entries__.length);\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @returns {Array<Array>}\r\n         */\r\n        entries() {\r\n            return this.__entries__.slice();\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        keys() {\r\n            return this.__entries__.map(entry => entry[0]);\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        values() {\r\n            return this.__entries__.map(entry => entry[1]);\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {Function} callback\r\n         * @param {Object} [ctx = null]\r\n         */\r\n        forEach(callback, ctx = null) {\r\n            for (const entry of this.__entries__) {\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        }\r\n    };\r\n})();\r\n\r\nexport {Map, WeakMap};","/**\r\n * A shim for performance.now method which falls back\r\n * to Date.now if the first one is not supported.\r\n *\r\n * @returns {Timestamp}\r\n */\r\nexport default (function () {\r\n    if (window.performance && window.performance.now) {\r\n        return () => window.performance.now();\r\n    }\r\n\r\n    return () => Date.now();\r\n})();","import now from './shims/performance.now';\r\n\r\nconst mutationsSupported = typeof window.MutationObserver === 'function';\r\n\r\n/**\r\n * A shim for requestAnimationFrame which falls back\r\n * to setTimeout if the first one is not supported.\r\n *\r\n * @returns {Number} Request identifier.\r\n */\r\nconst requestAnimFrame = (function () {\r\n    if (window.requestAnimationFrame) {\r\n        return window.requestAnimationFrame;\r\n    }\r\n\r\n    return callback => {\r\n        return setTimeout(() => callback(now()), 1000 / 60);\r\n    };\r\n})();\r\n\r\n/**\r\n * Creates a wrapper function that ensures that\r\n * provided callback will be invoked only after\r\n * the specified delay.\r\n *\r\n * @param {Function} callback\r\n * @param {Number} [delay = 0]\r\n * @returns {Function}\r\n */\r\nfunction debounce(callback, delay = 0) {\r\n    let timeoutID = false;\r\n\r\n    return function (...args) {\r\n        if (timeoutID !== false) {\r\n            clearTimeout(timeoutID);\r\n        }\r\n\r\n        timeoutID = setTimeout(() => {\r\n            timeoutID = false;\r\n\r\n            callback.apply(this, args);\r\n        }, delay);\r\n    };\r\n}\r\n\r\n/**\r\n * Controller class that is used to handle updates of registered IntersectionObservers.\r\n * It controls when and for how long it's necessary to run updates of observations\r\n * by listening to various events on window along with DOM mutations\r\n * (nodes removal, changes of attributes, etc.).\r\n  *\r\n * CSS transitions and animations are handled by running the update cycle\r\n * until position of DOM elements, added to connected observers, keeps changing\r\n * or until the idle timeout is reached (default timeout is 50 milliseconds).\r\n * Timeout value can be manually increased if transitions have a delay.\r\n *\r\n * Tracking of changes made by \":hover\" class is optional and can be\r\n * enabled by invoking the \"enableHover\" method.\r\n *\r\n * Infinite update cycle along with a listener of \"click\" event will be used in case when\r\n * MutatioObserver is not supported.\r\n */\r\nexport default class IntersectionObserverController {\r\n    /**\r\n     * Creates new IntersectionObserverController instance.\r\n     *\r\n     * @param {Number} [idleTimeout = 50]\r\n     * @pram {Boolean} [trackHovers = false] - Whether to track \"mouseover\"\r\n     *      events or not. Disabled be default.\r\n     */\r\n    constructor(idleTimeout = 50, trackHovers = false) {\r\n        this._idleTimeout = idleTimeout;\r\n        this._trackHovers = trackHovers;\r\n        this._cycleStartTime = -1;\r\n\r\n        // Indicates whether the update of observers is scheduled.\r\n        this._isUpdateScheduled = false;\r\n\r\n        // Indicates whether infinite cycles are enabled.\r\n        this._repeatCycle = false;\r\n\r\n        // Indicates whether \"mouseover\" event handler was added.\r\n        this._hoverInitiated = false;\r\n\r\n        // Keeps reference to the instance of MutationObserver.\r\n        this._mutationsObserver = null;\r\n\r\n        // Indicates whether DOM listeners were initiated.\r\n        this._isListening = false;\r\n\r\n        // A list of connected observers.\r\n        this._observers = [];\r\n\r\n        // Fix value of \"this\" binding for the following methods.\r\n        this.startUpdateCycle = this.startUpdateCycle.bind(this);\r\n        this.scheduleUpdate = this.scheduleUpdate.bind(this);\r\n        this._onMutation = this._onMutation.bind(this);\r\n\r\n        // Function that will be invoked to re-rerun the update cycle\r\n        // if repeatable cycles are enabled.\r\n        this._repeatHandler = debounce(this.scheduleUpdate, 200);\r\n\r\n        // \"mouseover\" event handler.\r\n        this._onMouseOver = debounce(this.startUpdateCycle, 200);\r\n    }\r\n\r\n    /**\r\n     * Returns current idle timeout value.\r\n     *\r\n     * @returns {Number}\r\n     */\r\n    get idleTimeout() {\r\n        return this._idleTimeout;\r\n    }\r\n\r\n    /**\r\n     * Sets up new idle timeout value.\r\n     *\r\n     * @param {Number} value - New timeout value.\r\n     */\r\n    set idleTimeout(value) {\r\n        this._idleTimeout = value;\r\n    }\r\n\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {IntersectionObserver} observer - Observer to be added.\r\n     */\r\n    connect(observer) {\r\n        if (!this.isConnected(observer)) {\r\n            this._observers.push(observer);\r\n        }\r\n\r\n        // Instantiate listeners if they\r\n        // weren't instantiated yet.\r\n        if (!this._isListening) {\r\n            this._initListeners();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {IntersectionObserver} observer - Observer to be removed.\r\n     */\r\n    disconnect(observer) {\r\n        let observers = this._observers,\r\n            index = observers.indexOf(observer);\r\n\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n\r\n        // Remove listeners if controller\r\n        // has no connected observers.\r\n        if (!observers.length && this._isListening) {\r\n            this._removeListeners();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Tells whether provided observer is connected to controller.\r\n     *\r\n     * @param {IntersectionObserver} observer - Observer to be checked.\r\n     * @returns {Boolean}\r\n     */\r\n    isConnected(observer) {\r\n        return !!~this._observers.indexOf(observer);\r\n    }\r\n\r\n    /**\r\n     * Updates every observer from observers list and\r\n     * notifies them of queued entries.\r\n     *\r\n     * @private\r\n     * @returns {Boolean} Returns \"true\" if any observer\r\n     *      has detected changes in position of its elements.\r\n     */\r\n    _updateObservers() {\r\n        let hasChanges = false;\r\n\r\n        for (const observer of this._observers) {\r\n            if (observer.updateObservations()) {\r\n                hasChanges = true;\r\n            }\r\n\r\n            if (observer.hasEntries()) {\r\n                observer.notifySubscriber();\r\n            }\r\n        }\r\n\r\n        return hasChanges;\r\n    }\r\n\r\n    /**\r\n     * Schedules new update cycle.\r\n     */\r\n    startUpdateCycle() {\r\n        this._cycleStartTime = now();\r\n\r\n        this.scheduleUpdate();\r\n    }\r\n\r\n    /**\r\n     * Controls invocation of \"_updateObservers\" method.\r\n     * It will re-invoke itself in the following cases:\r\n     *      - Update of observers detected changes in elements position.\r\n     *        In this case we need to postpone cycle end time in order to ensure\r\n     *        that we won't miss next iteration of animations.\r\n     *\r\n     *      - Idle timeout wasn't reached yet.\r\n     *        In this case we need to schedule new single update\r\n     *        because changes may be delayed.\r\n     *\r\n     * @param {Number} [timestamp] - Internal parameter\r\n     *      that is used to define whether method was invoked\r\n     *      as a callback of requestAnimationFrame.\r\n     */\r\n    scheduleUpdate(timestamp) {\r\n        let calledFromRAF = typeof timestamp === 'number';\r\n\r\n        // Invoke the update of observers only if function\r\n        // was called as a requestAnimationFrame callback.\r\n        if (calledFromRAF) {\r\n            const hasChanges = this._updateObservers();\r\n\r\n            this._isUpdateScheduled = false;\r\n\r\n            // Do nothing if cycle wasn't started.\r\n            if (!this._wasCycleStarted()) {\r\n                return;\r\n            }\r\n\r\n            if (hasChanges) {\r\n                // Postpone cycle end time if changes were detected.\r\n                this.startUpdateCycle();\r\n            } else if (!this._hasIdleTimeEnded()) {\r\n                // Schedule new single update if cycle timeout wasn't reached yet.\r\n                this.scheduleUpdate();\r\n            } else {\r\n                // Finish cycle.\r\n                this._onCycleEnded();\r\n            }\r\n        } else if (!this._isUpdateScheduled) {\r\n            // Request new update if it wasn't requested already.\r\n            requestAnimFrame(this.scheduleUpdate);\r\n\r\n            this._isUpdateScheduled = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Tells whether cycle has reached its idle timeout.\r\n     *\r\n     * @private\r\n     * @returns {Boolean}\r\n     */\r\n    _hasIdleTimeEnded() {\r\n        return now() - this._cycleStartTime > this._idleTimeout;\r\n    }\r\n\r\n    /**\r\n     * Tells whether the update cycle is currently running.\r\n     *\r\n     * @private\r\n     * @returns {Boolean}\r\n     */\r\n    _wasCycleStarted() {\r\n        return this._cycleStartTime !== -1;\r\n    }\r\n\r\n    /**\r\n     * Callback that will be invoked after the update cycle is finished.\r\n     *\r\n     * @private\r\n     */\r\n    _onCycleEnded() {\r\n        // Mark that update cycle is not running.\r\n        this._cycleStartTime = -1;\r\n\r\n        if (this._repeatCycle) {\r\n            // Time is set to '0' because we want to automatically\r\n            // start update cycle when single update detects changes.\r\n            this._cycleStartTime = 0;\r\n\r\n            this._repeatHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     */\r\n    _initListeners() {\r\n        // Do nothing if listeners are already initiated.\r\n        if (this._isListening) {\r\n            return;\r\n        }\r\n\r\n        this._isListening = true;\r\n\r\n        // Use update cycle here instead of a single update because we may encounter\r\n        // with delayed changes, e.g. when width or height of an\r\n        // element are changed by CSS transitions.\r\n        window.addEventListener('resize', this.startUpdateCycle, true);\r\n\r\n        window.addEventListener('scroll', this.scheduleUpdate, true);\r\n\r\n        // Listen to possible changes made by \":hover\" class.\r\n        if (this._trackHovers) {\r\n            this._addHoverListener();\r\n        }\r\n\r\n        // Fall back to repeatable cycle with additional tracking of\r\n        // \"click\" event if MutationObserver is not supported.\r\n        if (!mutationsSupported) {\r\n            this._repeatCycle = true;\r\n\r\n            // Listen to clicks as they may cause changes in elements position.\r\n            window.addEventListener('click', this.startUpdateCycle, true);\r\n\r\n            // Manually start cycle.\r\n            this.startUpdateCycle();\r\n        } else {\r\n            // Subscribe to DOM mutations as they may lead to changes in position of elements.\r\n            this._mutationsObserver = new MutationObserver(this._onMutation);\r\n\r\n            this._mutationsObserver.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes all DOM listeners.\r\n     *\r\n     * @private\r\n     */\r\n    _removeListeners() {\r\n        // Do nothing if listeners were already removed.\r\n        if (!this._isListening) {\r\n            return;\r\n        }\r\n\r\n        window.removeEventListener('resize', this.startUpdateCycle, true);\r\n        window.removeEventListener('scroll', this.scheduleUpdate, true);\r\n\r\n        this._removeHoverListener();\r\n\r\n        if (!mutationsSupported) {\r\n            this._repeatCycle = false;\r\n\r\n            window.removeEventListener('click', this.startUpdateCycle, true);\r\n        } else if (this._mutationsObserver) {\r\n            this._mutationsObserver.disconnect();\r\n            this._mutationsObserver = null;\r\n        }\r\n\r\n        this._isListening = false;\r\n    }\r\n\r\n    /**\r\n     * Enables hover listener.\r\n     */\r\n    enableHover() {\r\n        this._trackHovers = true;\r\n\r\n        // Manually add hover listener\r\n        // if listeners were already initiated.\r\n        if (this._isListening) {\r\n            this._addHoverListener();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disables hover listener.\r\n     */\r\n    disableHover() {\r\n        this._trackHovers = false;\r\n\r\n        this._removeHoverListener();\r\n    }\r\n\r\n    /**\r\n     * Tells whether hover listener is enabled.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    isHoverEnabled() {\r\n        return this._trackHovers;\r\n    }\r\n\r\n    /**\r\n     * Adds \"mouseover\" listener if it wasn't already added.\r\n     *\r\n     * @private\r\n     */\r\n    _addHoverListener() {\r\n        if (this._hoverInitiated) {\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('mouseover', this._onMouseOver, true);\r\n\r\n        this._hoverInitiated = true;\r\n    }\r\n\r\n    /**\r\n     * Removes \"mouseover\" listener if it was added previously.\r\n     *\r\n     * @private\r\n     */\r\n    _removeHoverListener() {\r\n        if (!this._hoverInitiated) {\r\n            return;\r\n        }\r\n\r\n        window.removeEventListener('mouseover', this._onMouseOver, true);\r\n\r\n        this._hoverInitiated = false;\r\n    }\r\n\r\n    /**\r\n     * DOM mutations handler.\r\n     *\r\n     * @private\r\n     * @param {Array<MutationRecord>} entries\r\n     */\r\n    _onMutation(entries) {\r\n        const runSingleUpdate = entries.every(entry => {\r\n            return entry.type !== 'attributes';\r\n        });\r\n\r\n        // Schedule single update if attributes (class, style, etc.)\r\n        // were not changed. Otherwise run update cycle because\r\n        // animations are expected to appear only in this case.\r\n        runSingleUpdate ?\r\n            this.scheduleUpdate() :\r\n            this.startUpdateCycle();\r\n    }\r\n}\r\n","/**\r\n * From provided rectangle creates a new one whose\r\n * properties are not enumerable, configurable or writable.\r\n *\r\n * @param {ClientRect} rect - Initial rectangle.\r\n * @returns {ClientRect}\r\n */\r\nexport function mapToClientRect(rect) {\r\n    const descriptors = {};\r\n\r\n    for (const key of Object.keys(rect)) {\r\n        descriptors[key] = {value: rect[key]};\r\n    }\r\n\r\n    return Object.defineProperties({}, descriptors);\r\n}\r\n\r\n/**\r\n * Creates rectangle based on provided arguments.\r\n * If called without arguments then an empty rectangle\r\n * will be created.\r\n *\r\n * @param {Number} [left = 0] - Left position of rectangle.\r\n * @param {Number} [top = 0] - Top position of rectangle.\r\n * @param {Number} [width = 0] - Rectangles' width.\r\n * @param {Number} [height = 0] - Rectangles' height.\r\n * @returns {ClientRect}\r\n */\r\nexport function createRectangle(left = 0, top = 0, width = 0, height = 0) {\r\n    return {\r\n        left, top, width, height,\r\n        bottom: top + height,\r\n        right: left + width\r\n    };\r\n}\r\n\r\n/**\r\n * Returns client rectangle of provided element.\r\n * If element represents documentElement then returns\r\n * main viewport rectangle.\r\n *\r\n * @param {Element} target\r\n * @returns {ClientRect}\r\n */\r\nexport function getRectangle(target) {\r\n    if (target === document.documentElement) {\r\n        return createRectangle(0, 0, target.clientWidth, target.clientHeight);\r\n    }\r\n\r\n    return target.getBoundingClientRect();\r\n}\r\n\r\n/**\r\n * Calculates area of rectangle.\r\n *\r\n * @param {ClientRect} rect - Rectangle whose area needs to be calculated.\r\n * @returns {Number} Rectangles' area.\r\n */\r\nexport function getArea(rect) {\r\n    return rect.width * rect.height;\r\n}\r\n\r\n/**\r\n * Tells whether rectangle is empty.\r\n *\r\n * @param {ClientRect} rect - Rectangle to be checked.\r\n * @returns {Boolean}\r\n */\r\nexport function isEmpty(rect) {\r\n    return rect.height === 0 && rect.width === 0;\r\n}\r\n\r\n/**\r\n * Compares rectangles to each other.\r\n *\r\n * @param {ClientRect} first\r\n * @param {ClientRect} second\r\n * @returns {Boolean}\r\n */\r\nexport function isEqual(first, second) {\r\n    return (\r\n        first.top === second.top &&\r\n        first.left === second.left &&\r\n        first.right === second.right &&\r\n        first.bottom === second.bottom\r\n    );\r\n}\r\n","import {mapToClientRect} from './geometry';\r\n\r\nexport default class IntersectionObserverEntry {\r\n    /**\r\n     * Creates new instance of IntersectionObserverEntry.\r\n     *\r\n     * @param {Element} target\r\n     * @param {ClientRect} targetRect\r\n     * @param {ClientRect} intersecRect\r\n     * @param {Number} intersecRatio\r\n     * @param {ClientRect} rootBounds\r\n     * @param {Timestamp} time\r\n     */\r\n    constructor(target, targetRect, intersecRect, intersecRatio, rootBounds, time) {\r\n\r\n        // According to the spec following properties are not writable and\r\n        // in native implementation they are also not enumerable.\r\n        Object.defineProperties(this, {\r\n            boundingClientRect: {value: targetRect},\r\n            intersectionRatio:  {value: intersecRatio},\r\n            intersectionRect:   {value: mapToClientRect(intersecRect)},\r\n            rootBounds:         {value: mapToClientRect(rootBounds)},\r\n            target:             {value: target},\r\n            time:               {value: time}\r\n        });\r\n    }\r\n}\r\n","import now from './shims/performance.now';\r\nimport {getArea, getRectangle, createRectangle, isEmpty, isEqual}  from './geometry';\r\nimport IntersectionObserverEntry from './IntersectionObserverEntry';\r\n\r\nconst emptyRect = createRectangle();\r\n\r\n/**\r\n * Tells whether target is a descendant of container element\r\n * and that both of them are present in DOM.\r\n *\r\n * @param {Element} container - Container element.\r\n * @param {Element} target - Target element.\r\n * @returns {Boolean}\r\n */\r\nfunction isDetached(container, target) {\r\n    const docElement = document.documentElement;\r\n\r\n    return (\r\n        container !== docElement && !docElement.contains(container) ||\r\n        !container.contains(target)\r\n    );\r\n}\r\n\r\n/**\r\n * Computes intersection rectangle between two rectangles.\r\n *\r\n * @param {ClientRect} rootRect - Rectangle of container element.\r\n * @param {ClientRect} targetRect - Rectangle of target element.\r\n * @returns {ClientRect} Intersection rectangle.\r\n */\r\nfunction computeIntersection(rootRect, targetRect) {\r\n    const left      = Math.max(targetRect.left, rootRect.left);\r\n    const right     = Math.min(targetRect.right, rootRect.right);\r\n    const top       = Math.max(targetRect.top, rootRect.top);\r\n    const bottom    = Math.min(targetRect.bottom, rootRect.bottom);\r\n\r\n    const width = right - left;\r\n    const height = bottom - top;\r\n\r\n    return createRectangle(left, top, width, height);\r\n}\r\n\r\n/**\r\n * Finds intersection rectangle of provided elements.\r\n *\r\n * @param {Element} container - Container element.\r\n * @param {Element} target - Target element.\r\n * @param {ClientRect} targetRect - Rectangle of target element.\r\n * @param {ClientRect} containterRect - Rectangle of container element.\r\n */\r\nfunction getIntersection(container, target, containterRect, targetRect) {\r\n    let intersecRect    = targetRect,\r\n        parent          = target.parentNode,\r\n        rootReached     = false;\r\n\r\n    while (!rootReached) {\r\n        let parentRect = null;\r\n\r\n        if (parent === container || parent.nodeType !== 1) {\r\n            rootReached = true;\r\n            parentRect = containterRect;\r\n        } else if (window.getComputedStyle(parent).overflow !== 'visible') {\r\n            parentRect = getRectangle(parent);\r\n        }\r\n\r\n        if (parentRect) {\r\n            intersecRect = computeIntersection(intersecRect, parentRect);\r\n        }\r\n\r\n        parent = parent.parentNode;\r\n    }\r\n\r\n    return intersecRect;\r\n}\r\n\r\n/**\r\n * This class is responsible for computing and keeping track of intersections\r\n * between target element and its container. It will create and queue for notification\r\n * new IntersectionObserverEntry when intersection ratio reaches new thresholded value.\r\n */\r\nexport default class IntersectionObservation {\r\n    /**\r\n     * Creates instance of IntersectionObservation.\r\n     *\r\n     * @param {Element} target - Element being observed.\r\n     * @param {IntersectionObserver} observer - Associated IntersectionObserver.\r\n     */\r\n    constructor(target, observer) {\r\n        this.target = target;\r\n        this.observer = observer;\r\n\r\n        this.prevTargetRect = emptyRect;\r\n        this.prevThreshold = 0;\r\n        this.prevRatio = 0;\r\n    }\r\n\r\n    /**\r\n     * Updates intersection data. Creates and queues new\r\n     * IntersectionObserverEntry if intersection threshold has changed.\r\n     *\r\n     * @param {Object} root - Element for which to compute intersection.\r\n     * @param {ClientRect} rootRect - Rectangle of root element.\r\n     * @returns {Object} An object with information about detected changes:\r\n     *  {\r\n     *      ratioChanged: boolean,\r\n     *      targetRectChanged: boolean,\r\n     *      thresholdChanged: boolean\r\n     *  }\r\n     */\r\n    updateIntersection(root, rootRect) {\r\n        let targetRect          = getRectangle(this.target),\r\n            intersection        = this.getIntersectionData(root, rootRect, targetRect),\r\n            threshold           = +intersection.exists,\r\n            ratioChanged        = intersection.ratio !== this.prevRatio,\r\n            targetRectChanged   = !isEqual(targetRect, this.prevTargetRect),\r\n            thresholdChanged;\r\n\r\n        // Find thresholds' index if intersection\r\n        // and target rectangles are not empty.\r\n        if (intersection.exists && !isEmpty(targetRect)) {\r\n            threshold = this.observer.getThresholdGreaterThan(intersection.ratio);\r\n        }\r\n\r\n        thresholdChanged = threshold !== this.prevThreshold;\r\n\r\n        // Update cached properties.\r\n        this.prevTargetRect = targetRect;\r\n        this.prevThreshold = threshold;\r\n        this.prevRatio = intersection.ratio;\r\n\r\n        // Create an empty rectangle if there is no intersection.\r\n        if (!intersection.exists) {\r\n            intersection.ratio = 0;\r\n            intersection.rect = emptyRect;\r\n        }\r\n\r\n        // Create and queue new entry if threshold has changed.\r\n        if (thresholdChanged) {\r\n            const entry = new IntersectionObserverEntry(\r\n                this.target,\r\n                targetRect,\r\n                intersection.rect,\r\n                intersection.ratio,\r\n                rootRect,\r\n                now()\r\n            );\r\n\r\n            this.observer.queueEntry(entry);\r\n        }\r\n\r\n        return {ratioChanged, thresholdChanged, targetRectChanged};\r\n    }\r\n\r\n    /**\r\n     * Computes intersection data.\r\n     *\r\n     * @param {Element} container - Container element.\r\n     * @param {ClientRect} [containterRect]\r\n     * @param {ClientRect} [targetRect]\r\n     * @returns {Object}\r\n     */\r\n    getIntersectionData(container, containterRect, targetRect) {\r\n        const target = this.target;\r\n\r\n        if (!targetRect) {\r\n            targetRect = getRectangle(this.target);\r\n        }\r\n\r\n        if (!containterRect) {\r\n            containterRect = getRectangle(container);\r\n        }\r\n\r\n        let detached        = isDetached(container, target),\r\n            intersecRect    = !detached ? getIntersection(container, target, containterRect, targetRect) : emptyRect,\r\n            intersects      = !detached && intersecRect.width >= 0 && intersecRect.height >= 0,\r\n            intersecRatio   = getArea(intersecRect) / getArea(targetRect) || 0;\r\n\r\n        return {\r\n            rect: intersecRect,\r\n            ratio: intersecRatio,\r\n            exists: intersects\r\n        };\r\n    }\r\n}\r\n","import {Map} from './shims/es6-collections';\r\nimport {getRectangle} from './geometry';\r\nimport IntersectionObservation from './IntersectionObservation';\r\n\r\n/**\r\n * Validates and parses threshold values.\r\n * Throws an error if one of the thresholds\r\n * is non-finite or not in range of 0 and 1.\r\n *\r\n * @param {(Array<Number>|Number)} [thresholds = 0]\r\n * @returns {Array<Number>} An array of thresholds in ascending order.\r\n */\r\nfunction parseThresholds(thresholds = 0) {\r\n    let result = thresholds;\r\n\r\n    if (!Array.isArray(thresholds)) {\r\n        result = [thresholds];\r\n    } else if (!thresholds.length) {\r\n        result = [0];\r\n    }\r\n\r\n    return result.map(threshold => {\r\n        // We use Number function instead of parseFloat\r\n        // to convert boolean values and null to theirs\r\n        // numeric representation. This is done to act\r\n        // in the same manner as a native implementation.\r\n        threshold = Number(threshold);\r\n\r\n        if (!window.isFinite(threshold)) {\r\n            throw new TypeError('The provided double value is non-finite.');\r\n        } else if (threshold < 0 || threshold > 1) {\r\n            throw new RangeError('Threshold values must be between 0 and 1.');\r\n        }\r\n\r\n        return threshold;\r\n    }).sort();\r\n}\r\n\r\n/**\r\n * Validates and converts margins value (defined in a form of\r\n * CSS 'margin' property) to a list of tokens, e.g:\r\n * 1. '0px' = [['0px'], ['0px'], ['0px'], ['0px']]\r\n * 2. '5px 11px' = [['5px'], ['11px'], ['5px'], ['11px']]\r\n *\r\n * @param {String} [margins = '0px'] - Margins value to be processed.\r\n * @returns {Array<Array>} Object that contains both: a list of\r\n *      tokens and its string representation.\r\n */\r\nfunction parseMargins(margins = '0px') {\r\n    // Use regular expression in order to properly\r\n    // handle multiple spaces in-between of tokens: '0px     2px   5px'.\r\n    //\r\n    // Casting to a string is required to keep the behavior\r\n    // closer to the native implementation which converts\r\n    // an array like [[['2px 3px']]] to '2px 3px';\r\n    margins = (margins + '').split(/\\s+/);\r\n\r\n    // Chrome validates tokens length starting from version 53.\r\n    if (margins.length > 4) {\r\n        throw new Error('Extra text found at the end of rootMargin.');\r\n    }\r\n\r\n    margins[0] = margins[0] || '0px';\r\n    margins[1] = margins[1] || margins[0];\r\n    margins[2] = margins[2] || margins[0];\r\n    margins[3] = margins[3] || margins[1];\r\n\r\n    const rawData = margins.join(' ');\r\n\r\n    const parsedData = margins.map(token => {\r\n        let [,value, unit] = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(token) || [];\r\n        const pixels = unit === 'px';\r\n\r\n        value = parseFloat(value);\r\n\r\n        if (!window.isFinite(value)) {\r\n            throw new Error('rootMargin must be specified in pixels or percent.');\r\n        }\r\n\r\n        if (!pixels) {\r\n            value /= 100;\r\n        }\r\n\r\n        return {value, pixels};\r\n    });\r\n\r\n    return {rawData, parsedData};\r\n}\r\n\r\n/**\r\n * Creates new rectangle from provided one whose\r\n * dimensions will be modified by applying margins\r\n * defined in a form of [[value: Number, pixels: Boolean], ...].\r\n *\r\n * @param {ClientRect} targetRect - Initial rectangle.\r\n * @param {Array<Array>} margins - Margins data.\r\n * @returns {ClientRect} Modified rectangle.\r\n */\r\nfunction applyMargins(targetRect, margins) {\r\n    margins = margins.map((margin, index) => {\r\n        let value = margin.value;\r\n\r\n        if (!margin.pixels) {\r\n            value *= index % 2 ? targetRect.width : targetRect.height;\r\n        }\r\n\r\n        return value;\r\n    });\r\n\r\n    const result = {\r\n        top: targetRect.top - margins[0],\r\n        right: targetRect.right + margins[1],\r\n        bottom: targetRect.bottom + margins[2],\r\n        left: targetRect.left - margins[3]\r\n    };\r\n\r\n    result.width = result.right - result.left;\r\n    result.height = result.bottom - result.top;\r\n\r\n    return result;\r\n}\r\n\r\nexport default class IntersectionObserver {\r\n    /**\r\n     * Creates new IntersectionObserver instance.\r\n     *\r\n     * @param {Function} callback - Callback function that will be invoked\r\n     *      whenever one of the observed targets reaches new ratio value defined in \"options.threshold\".\r\n     * @param {Object} [options = {}] - Optional configuration.\r\n     * @param {IntersectionObserverController} controller - Associated controller instance.\r\n     * @param {IntersectionObserver} publicObserver - This value will be used as\r\n     *      a value of \"this\" binding for the callback function.\r\n     */\r\n    constructor(callback, options = {}, controller, publicObserver) {\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError(\"The callback provided as parameter 1 is not a function.\");\r\n        }\r\n\r\n        if (typeof options !== 'object') {\r\n            throw new TypeError(\"parameter 2 is not an object.\");\r\n        }\r\n\r\n        if ('root' in options && !(options.root instanceof Element)) {\r\n            throw new TypeError(\"member root is not of type Element.\");\r\n        }\r\n\r\n\r\n        const thresholds = parseThresholds(options.threshold);\r\n        const rootMargin = parseMargins(options.rootMargin);\r\n\r\n        this.root = options.root || null;\r\n        this.rootMargin = rootMargin.rawData;\r\n\r\n        // Thresholds array needs to be immutable\r\n        // according to the native implementation.\r\n        this.thresholds = Object.freeze(thresholds);\r\n\r\n        this._root = options.root || document.documentElement;\r\n        this._callback = callback;\r\n        this._rootMargin = rootMargin.parsedData;\r\n\r\n        // Registry of observed elements and\r\n        // corresponding IntersectionObservation instances.\r\n        this._targets = new Map();\r\n\r\n        // A list of queued IntersectionObserverEntry\r\n        // items that will passed to the callback function.\r\n        this._quedEntries = [];\r\n\r\n        this._publicObserver = publicObserver || this;\r\n\r\n        this.controller = controller;\r\n    }\r\n\r\n    /**\r\n     * Adds provided target to observations list.\r\n     *\r\n     * @param {Element} target - DOM element to be observed.\r\n     */\r\n    observe(target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n\r\n        if (!(target instanceof Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n\r\n        let targets = this._targets;\r\n\r\n        // Do nothing if target is already observed.\r\n        if (targets.has(target)) {\r\n            return;\r\n        }\r\n\r\n        // Create new IntersectionObservation instance and assign it\r\n        // to provided target.\r\n        targets.set(target, new IntersectionObservation(target, this));\r\n\r\n        // Connect current observer to controller\r\n        // if it wasn't connected yet.\r\n        if (!this.controller.isConnected(this)) {\r\n            this.controller.connect(this);\r\n        }\r\n\r\n        // Request the update of observers.\r\n        this.controller.startUpdateCycle();\r\n    }\r\n\r\n    /**\r\n     * Removes provided target from observations list.\r\n     *\r\n     * @param {Element} target - DOM element to stop observing.\r\n     */\r\n    unobserve(target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n\r\n        if (!(target instanceof Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n\r\n        let targets = this._targets;\r\n\r\n        if (targets.has(target)) {\r\n            targets.delete(target);\r\n        }\r\n\r\n        // Disconnect observer if the list of observed targets is empty.\r\n        if (!targets.size) {\r\n            this.disconnect();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes all targets from observations list\r\n     * and disconnects observer from associated controller, i.e.\r\n     * no updates will be invoked for it.\r\n     */\r\n    disconnect() {\r\n        this._targets.clear();\r\n        this.controller.disconnect(this);\r\n    }\r\n\r\n    /**\r\n     * Returns a list of queued observation entries and\r\n     * clears the queue.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    takeRecords() {\r\n        return this._quedEntries.splice(0);\r\n    }\r\n\r\n    /**\r\n     * Invokes callback function with a list\r\n     * of queued entries if the last one is not empty.\r\n     *\r\n     * @private\r\n     */\r\n    notifySubscriber() {\r\n        const entries = this.takeRecords();\r\n        const publicObserver = this._publicObserver;\r\n\r\n        if (entries.length) {\r\n            this._callback.call(publicObserver, entries, publicObserver);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds entry to the queue.\r\n     *\r\n     * @param {IntersectionObserverEntry} entry\r\n     */\r\n    queueEntry(entry) {\r\n        this._quedEntries.push(entry);\r\n    }\r\n\r\n    /**\r\n     * Tells whether observer has queued entries.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    hasEntries() {\r\n        return !!this._quedEntries.length;\r\n    }\r\n\r\n    /**\r\n     * Updates intersection data of each observed target.\r\n     *\r\n     * @returns {Boolean} Returns \"true\" if intersection ratio or the rectangle of one of the\r\n     *      observed targets has changed. This information is required for\r\n     *      controller to decide whether to continue running the update cycle.\r\n     */\r\n    updateObservations() {\r\n        let root     = this._root,\r\n            rootRect = this.getRootRect(),\r\n            hasChanges = false;\r\n\r\n        this._targets.forEach(observation => {\r\n            const changes = observation.updateIntersection(root, rootRect);\r\n\r\n            if (changes.ratioChanged || changes.targetRectChanged) {\r\n                hasChanges = true;\r\n            }\r\n        });\r\n\r\n        return hasChanges;\r\n    }\r\n\r\n    /**\r\n     * Finds index of the first threshold whose value is greater than provided ratio.\r\n     * In case if there is no such value the amount of thresholds will be returned.\r\n     *\r\n     * @param {Number} ratio\r\n     * @returns {Number}\r\n     */\r\n    getThresholdGreaterThan(ratio) {\r\n        let thresholds = this.thresholds,\r\n            thresholdsLen = thresholds.length,\r\n            index = 0;\r\n\r\n        while (index < thresholdsLen && thresholds[index] <= ratio) {\r\n            ++index;\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    /**\r\n     * Calculates rectangle of root node with applied margins.\r\n     *\r\n     * @returns {ClientRect}\r\n     */\r\n    getRootRect() {\r\n        let rootRect = getRectangle(this._root);\r\n\r\n        return applyMargins(rootRect, this._rootMargin);\r\n    }\r\n}\r\n","import {WeakMap} from './shims/es6-collections';\r\nimport IntersectionObserverController from './IntersectionObserverController';\r\nimport _IntersectionObserver from './_IntersectionObserver';\r\n\r\n// This controllers' instance will be assigned to all IntersectionObservers\r\nconst controller = new IntersectionObserverController();\r\n\r\n// Registry of internal observers.\r\nconst observers = new WeakMap();\r\n\r\n/**\r\n * IntersectionObservers' \"Proxy\" class which is meant to hide private\r\n * properties and methods from IntersectionObserver instances.\r\n *\r\n * Additionally it implements \"idleTimeout\" and \"trackHovers\" static property\r\n * accessors to give a control over the behavior of IntersectionObserverController\r\n * instance. Changes made to these properties will affect both future and\r\n * existing instances of IntersectionObserver.\r\n */\r\nclass IntersectionObserver {\r\n    /**\r\n     * Creates instance of public IntersectionObserver.\r\n     *\r\n     * @param {Function} callback\r\n     * @param {Object} options\r\n     */\r\n    constructor(callback, options) {\r\n        if (!arguments.length) {\r\n            throw new TypeError(\"1 argument required, but only 0 present.\");\r\n        }\r\n\r\n        const observer = new _IntersectionObserver(callback, options, controller, this);\r\n\r\n        // Due to the spec following properties are non-writable\r\n        // and in native implementation they are also not enumerable.\r\n        Object.defineProperties(this, {\r\n            root:       {value: observer.root},\r\n            thresholds: {value: observer.thresholds},\r\n            rootMargin: {value: observer.rootMargin}\r\n        });\r\n\r\n        // Register internal observer.\r\n        observers.set(this, observer);\r\n    }\r\n\r\n    /**\r\n     * Extracts controllers' idle timeout value.\r\n     *\r\n     * @returns {Number}\r\n     */\r\n    static get idleTimeout() {\r\n        return controller.idleTimeout;\r\n    }\r\n\r\n    /**\r\n     * Sets up new idle timeout.\r\n     *\r\n     * @param {Number} value - New timeout value.\r\n     */\r\n    static set idleTimeout(value) {\r\n        if (typeof value !== 'number') {\r\n            throw new TypeError('type of \"idleTimeout\" value must be a number.');\r\n        }\r\n\r\n        if (typeof value < 0) {\r\n            throw new TypeError('\"idleTimeout\" value must be greater than 0.');\r\n        }\r\n\r\n        controller.idleTimeout = value;\r\n    }\r\n\r\n    /**\r\n     * Tells whether controller tracks \"hover\" events.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    static get trackHovers() {\r\n        return controller.isHoverEnabled();\r\n    }\r\n\r\n    /**\r\n     * Enables or disables tracking of \"hover\" event.\r\n     *\r\n     * @param {Boolean} value - Whether to disable or enable tracking.\r\n     */\r\n    static set trackHovers(value) {\r\n        if (typeof value !== 'boolean') {\r\n            throw new TypeError('type of \"trackHovers\" value must be a boolean.');\r\n        }\r\n\r\n        value ?\r\n            controller.enableHover() :\r\n            controller.disableHover();\r\n    }\r\n}\r\n\r\n// Expose public methods of IntersectionObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect',\r\n    'takeRecords'\r\n].forEach(method => {\r\n    IntersectionObserver.prototype[method] = function () {\r\n        return observers.get(this)[method](...arguments);\r\n    };\r\n});\r\n\r\nexport default IntersectionObserver;\r\n","import IntersectionObserverPolyfill from './src/IntersectionObserver';\r\n\r\nlet IntersectionObserver;\r\n\r\n// Define what implementation of IntersectionObserver\r\n// needs to be exported: existing or polyfilled.\r\nif (typeof window.IntersectionObserver === 'function') {\r\n    // Export existing IntersectionObservers' implementation.\r\n    IntersectionObserver = window.IntersectionObserver;\r\n} else {\r\n    // Export polyfill.\r\n    IntersectionObserver = IntersectionObserverPolyfill;\r\n}\r\n\r\nexport default IntersectionObserver;","import flatten from 'lodash/flatten';\nimport createObserver from './utils/observer';\nimport 'intersection-observer-polyfill';\nconst { observe, unobserve } = createObserver( IntersectionObserver );\n\nconst createSegments = container => {\n    const delays = Array( 4 ).fill( 0 ).map( _ => Math.random() * .5 + 's' );\n    [ 'tl', 'tr', 'rt', 'rb', 'br', 'bl', 'lb', 'lt' ].forEach( ( modifier, i ) => {\n        const segment = document.createElement('div');\n        segment.className = `border__segment border__segment--${ modifier }`;\n        segment.style.transitionDelay = delays[ Math.floor( i / 2 ) ];\n        container.appendChild( segment );\n    })\n}\n\nconst els = [ ...document.querySelectorAll( '.border' ) ];\nels.forEach( createSegments );\n\nconst onIntersect = entry => {\n    if ( entry.isIntersecting ) {\n        entry.target.classList.add( 'border--visible' );\n        unobserve( entry.target, onIntersect );\n    }\n}\n\nconst update = () => {\n    els.forEach( el => {\n        const rect = el.getBoundingClientRect();\n        el.style.setProperty( '--border-container-width', rect.width );\n        el.style.setProperty( '--border-container-height', rect.height );\n        if ( !el.classList.contains( 'border--measured' ) ) {\n            el.classList.add( 'border--measured' );\n            observe( el, onIntersect );\n        }\n    })\n}\n\nupdate();\nwindow.addEventListener( 'resize', update );","import './image';\nimport './borders';"]}